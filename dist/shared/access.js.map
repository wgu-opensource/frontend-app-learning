{"version":3,"sources":["../../src/shared/access.js"],"names":["getAccessDeniedRedirectUrl","courseId","activeTabSlug","courseAccess","start","url","errorCode","additionalContextUserMessage","startDate","Intl","DateTimeFormat","format","Date","encodeURIComponent","developerMessage"],"mappings":";;;;;;;AACA;;AADA;AAGA;AACA;AACA;AACO,SAASA,0BAAT,CAAoCC,QAApC,EAA8CC,aAA9C,EAA6DC,YAA7D,EAA2EC,KAA3E,EAAkF;AACvF,MAAIC,GAAG,GAAG,IAAV;;AACA,UAAQF,YAAY,CAACG,SAArB;AACE,SAAK,eAAL;AACED,MAAAA,GAAG,GAAI,6CAA4CF,YAAY,CAACI,4BAA6B,EAA7F;AACA;;AACF,SAAK,oBAAL;AACE;AACA,YAAMC,SAAS,GAAI,IAAIC,IAAI,CAACC,cAAT,CAAwB,sBAAxB,CAAD,CAAuCC,MAAvC,CAA8C,IAAIC,IAAJ,CAASR,KAAT,CAA9C,CAAlB;AACAC,MAAAA,GAAG,GAAI,+BAA8BG,SAAU,EAA/C;AACA;;AACF,SAAK,iBAAL;AACEH,MAAAA,GAAG,GAAI,oBAAmBJ,QAAS,EAAnC;AACA;;AACF,SAAK,8BAAL;AACEI,MAAAA,GAAG,GAAI,iCAAgCQ,kBAAkB,CAACV,YAAY,CAACW,gBAAd,CAAgC,EAAzF;AACA;;AACF,SAAK,6BAAL;AACET,MAAAA,GAAG,GAAI,WAAUJ,QAAS,gBAA1B;AACA;;AACF,SAAK,wBAAL;AACEI,MAAAA,GAAG,GAAG,qBAAN;AACA;;AACF,SAAK,yBAAL;AACA,SAAK,qBAAL;AACA;AACE,UAAIH,aAAa,KAAK,SAAtB,EAAiC;AAC/BG,QAAAA,GAAG,GAAI,WAAUJ,QAAS,OAA1B;AACD;;AA1BL;;AA4BA,SAAOI,GAAP;AACD","sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport { getLocale } from '@edx/frontend-platform/i18n';\n\n// This function inspects an access denied error and provides a redirect url (looks like a /redirect/... path),\n// which then renders a nice little message while the browser loads the next page.\n// This is basically a frontend version of check_course_access_with_redirect in the backend.\nexport function getAccessDeniedRedirectUrl(courseId, activeTabSlug, courseAccess, start) {\n  let url = null;\n  switch (courseAccess.errorCode) {\n    case 'audit_expired':\n      url = `/redirect/dashboard?access_response_error=${courseAccess.additionalContextUserMessage}`;\n      break;\n    case 'course_not_started':\n      // eslint-disable-next-line no-case-declarations\n      const startDate = (new Intl.DateTimeFormat(getLocale())).format(new Date(start));\n      url = `/redirect/dashboard?notlive=${startDate}`;\n      break;\n    case 'survey_required':\n      url = `/redirect/survey/${courseId}`;\n      break;\n    case 'data_sharing_access_required':\n      url = `/redirect/consent?consentPath=${encodeURIComponent(courseAccess.developerMessage)}`;\n      break;\n    case 'incorrect_active_enterprise':\n      url = `/course/${courseId}/access-denied`;\n      break;\n    case 'unfulfilled_milestones':\n      url = '/redirect/dashboard';\n      break;\n    case 'authentication_required':\n    case 'enrollment_required':\n    default:\n      if (activeTabSlug !== 'outline') {\n        url = `/course/${courseId}/home`;\n      }\n  }\n  return url;\n}\n"],"file":"access.js"}