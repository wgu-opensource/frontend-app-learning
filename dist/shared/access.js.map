{"version":3,"file":"access.js","names":["_i18n","require","getAccessDeniedRedirectUrl","courseId","activeTabSlug","courseAccess","start","url","errorCode","additionalContextUserMessage","startDate","Intl","DateTimeFormat","getLocale","format","Date","encodeURIComponent","developerMessage"],"sources":["../../src/shared/access.js"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport { getLocale } from '@edx/frontend-platform/i18n';\n\n// This function inspects an access denied error and provides a redirect url (looks like a /redirect/... path),\n// which then renders a nice little message while the browser loads the next page.\n// This is basically a frontend version of check_course_access_with_redirect in the backend.\nexport function getAccessDeniedRedirectUrl(courseId, activeTabSlug, courseAccess, start) {\n  let url = null;\n  switch (courseAccess.errorCode) {\n    case 'audit_expired':\n      url = `/redirect/dashboard?access_response_error=${courseAccess.additionalContextUserMessage}`;\n      break;\n    case 'course_not_started':\n      // eslint-disable-next-line no-case-declarations\n      const startDate = (new Intl.DateTimeFormat(getLocale())).format(new Date(start));\n      url = `/redirect/dashboard?notlive=${startDate}`;\n      break;\n    case 'survey_required':\n      url = `/redirect/survey/${courseId}`;\n      break;\n    case 'data_sharing_access_required':\n      url = `/redirect/consent?consentPath=${encodeURIComponent(courseAccess.developerMessage)}`;\n      break;\n    case 'incorrect_active_enterprise':\n      url = `/course/${courseId}/access-denied`;\n      break;\n    case 'unfulfilled_milestones':\n      url = '/redirect/dashboard';\n      break;\n    case 'authentication_required':\n    case 'enrollment_required':\n    default:\n      if (activeTabSlug !== 'outline') {\n        url = `/course/${courseId}/home`;\n      }\n  }\n  return url;\n}\n"],"mappings":";;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AADA;;AAGA;AACA;AACA;AACO,SAASC,0BAA0BA,CAACC,QAAQ,EAAEC,aAAa,EAAEC,YAAY,EAAEC,KAAK,EAAE;EACvF,IAAIC,GAAG,GAAG,IAAI;EACd,QAAQF,YAAY,CAACG,SAAS;IAC5B,KAAK,eAAe;MAClBD,GAAG,GAAI,6CAA4CF,YAAY,CAACI,4BAA6B,EAAC;MAC9F;IACF,KAAK,oBAAoB;MACvB;MACA,MAAMC,SAAS,GAAI,IAAIC,IAAI,CAACC,cAAc,CAAC,IAAAC,eAAS,EAAC,CAAC,CAAC,CAAEC,MAAM,CAAC,IAAIC,IAAI,CAACT,KAAK,CAAC,CAAC;MAChFC,GAAG,GAAI,+BAA8BG,SAAU,EAAC;MAChD;IACF,KAAK,iBAAiB;MACpBH,GAAG,GAAI,oBAAmBJ,QAAS,EAAC;MACpC;IACF,KAAK,8BAA8B;MACjCI,GAAG,GAAI,iCAAgCS,kBAAkB,CAACX,YAAY,CAACY,gBAAgB,CAAE,EAAC;MAC1F;IACF,KAAK,6BAA6B;MAChCV,GAAG,GAAI,WAAUJ,QAAS,gBAAe;MACzC;IACF,KAAK,wBAAwB;MAC3BI,GAAG,GAAG,qBAAqB;MAC3B;IACF,KAAK,yBAAyB;IAC9B,KAAK,qBAAqB;IAC1B;MACE,IAAIH,aAAa,KAAK,SAAS,EAAE;QAC/BG,GAAG,GAAI,WAAUJ,QAAS,OAAM;MAClC;EACJ;EACA,OAAOI,GAAG;AACZ"}