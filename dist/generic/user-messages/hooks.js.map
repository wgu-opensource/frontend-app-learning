{"version":3,"file":"hooks.js","names":["_react","require","_UserMessagesContext","_interopRequireDefault","obj","__esModule","default","useAlert","isVisible","_ref","code","text","topic","type","payload","dismissible","add","remove","useContext","UserMessagesContext","useEffect","undefined","cleanupId"],"sources":["../../../src/generic/user-messages/hooks.js"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport { useContext, useEffect } from 'react';\nimport UserMessagesContext from './UserMessagesContext';\n\nexport function useAlert(isVisible, {\n  code, text, topic, type, payload, dismissible,\n}) {\n  const { add, remove } = useContext(UserMessagesContext);\n\n  // Please note:\n  // The deps list [isVisible, code, ... etc.] in this `useEffect` call prevents the\n  // effect from running if none of deps have changed. However, \"changed\" for objects is\n  // defined in terms of identity; thus, if you provide a payload that is *seemingly* equal\n  // to the previous one but *actually* a different object, then this effect will run.\n  // If you are particularly unlucky, this will cause an infinite re-render loop.\n  // This manifested itself in TNL-7400.\n  // We hope to address the underlying issue in TNL-7418.\n  // In the mean time, you may follow the pattern that `useAccessExpirationAlert`\n  // establishes: memoize the payload so that the exact same object is used if the\n  // payload has not changed. And don't put values based off of now() in your payload, as\n  // that breaks memoization.\n  useEffect(() => {\n    if (!isVisible) {\n      return undefined;\n    }\n\n    const cleanupId = add({\n      code, text, topic, type, payload, dismissible,\n    });\n\n    return () => {\n      remove(cleanupId);\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isVisible, code, text, topic, type, payload, dismissible]);\n}\n"],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAC,sBAAA,CAAAF,OAAA;AAAwD,SAAAE,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAFxD;;AAIO,SAASG,QAAQA,CAACC,SAAS,EAAAC,IAAA,EAE/B;EAAA,IAFiC;IAClCC,IAAI;IAAEC,IAAI;IAAEC,KAAK;IAAEC,IAAI;IAAEC,OAAO;IAAEC;EACpC,CAAC,GAAAN,IAAA;EACC,MAAM;IAAEO,GAAG;IAAEC;EAAO,CAAC,GAAG,IAAAC,iBAAU,EAACC,4BAAmB,CAAC;;EAEvD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAAC,gBAAS,EAAC,MAAM;IACd,IAAI,CAACZ,SAAS,EAAE;MACd,OAAOa,SAAS;IAClB;IAEA,MAAMC,SAAS,GAAGN,GAAG,CAAC;MACpBN,IAAI;MAAEC,IAAI;MAAEC,KAAK;MAAEC,IAAI;MAAEC,OAAO;MAAEC;IACpC,CAAC,CAAC;IAEF,OAAO,MAAM;MACXE,MAAM,CAACK,SAAS,CAAC;IACnB,CAAC;IACH;EACA,CAAC,EAAE,CAACd,SAAS,EAAEE,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEC,IAAI,EAAEC,OAAO,EAAEC,WAAW,CAAC,CAAC;AAChE"}