{"version":3,"file":"PathFixesProvider.js","names":["_reactRouterDom","require","_propTypes","_interopRequireDefault","_analytics","_jsxRuntime","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","PathFixesProvider","_ref","children","location","useLocation","pathname","includes","newLocation","replaceAll","sendTrackEvent","new_path","old_path","referrer","document","search","jsx","Navigate","to","replace","propTypes","PropTypes","node","isRequired","_default","exports"],"sources":["../../../src/generic/path-fixes/PathFixesProvider.jsx"],"sourcesContent":["import { Navigate, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\n\n/**\n * We have seen evidence of learners hitting MFE pages with spaces instead of plus signs (which are used commonly\n * in our course keys). It's possible something out there is un-escaping our paths before sending learners to them.\n *\n * So this provider fixes those paths up and logs it so that we can try to fix the source.\n *\n * This might be temporary, based on how much we can fix the sources of these urls-with-spaces.\n */\nconst PathFixesProvider = ({ children }) => {\n  const location = useLocation();\n\n  // We only check for spaces. That's not the only kind of character that is escaped in URLs, but it would always be\n  // present for our cases, and I believe it's the only one we use normally.\n  if (location.pathname.includes(' ') || location.pathname.includes('%20')) {\n    const newLocation = {\n      ...location,\n      pathname: (location.pathname.replaceAll(' ', '+')).replaceAll('%20', '+'),\n    };\n\n    sendTrackEvent('edx.ui.lms.path_fixed', {\n      new_path: newLocation.pathname,\n      old_path: location.pathname,\n      referrer: document.referrer,\n      search: location.search,\n    });\n\n    return (<Navigate to={newLocation} replace />);\n  }\n\n  return children; // pass through\n};\n\nPathFixesProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default PathFixesProvider;\n"],"mappings":"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"}