{"version":3,"file":"slice.js","names":["_toolkit","require","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","add","state","modelType","model","idField","id","update","remove","slice","createSlice","name","initialState","reducers","addModel","_ref","payload","addModels","_ref2","models","addModelsMap","_ref3","modelsMap","values","updateModel","_ref4","updateModels","_ref5","updateModelsMap","_ref6","removeModel","_ref7","removeModels","_ref8","ids","actions","exports","reducer"],"sources":["../../../src/generic/model-store/slice.js"],"sourcesContent":["/* eslint-disable no-param-reassign */\nimport { createSlice } from '@reduxjs/toolkit';\n\nfunction add(state, modelType, model, idField) {\n  idField = idField ?? 'id';\n  const id = model[idField];\n  if (state[modelType] === undefined) {\n    state[modelType] = {};\n  }\n  state[modelType][id] = model;\n}\n\nfunction update(state, modelType, model, idField) {\n  idField = idField ?? 'id';\n  const id = model[idField];\n  if (state[modelType] === undefined) {\n    state[modelType] = {};\n  }\n  state[modelType][id] = { ...state[modelType][id], ...model };\n}\n\nfunction remove(state, modelType, id) {\n  if (state[modelType] === undefined) {\n    state[modelType] = {};\n  }\n\n  delete state[modelType][id];\n}\n\nconst slice = createSlice({\n  name: 'models',\n  initialState: {},\n  reducers: {\n    addModel: (state, { payload }) => {\n      const { modelType, model, idField } = payload;\n      add(state, modelType, model, idField);\n    },\n    addModels: (state, { payload }) => {\n      const { modelType, models, idField } = payload;\n      models.forEach(model => add(state, modelType, model, idField));\n    },\n    addModelsMap: (state, { payload }) => {\n      const { modelType, modelsMap, idField } = payload;\n      Object.values(modelsMap).forEach(model => add(state, modelType, model, idField));\n    },\n    updateModel: (state, { payload }) => {\n      const { modelType, model, idField } = payload;\n      update(state, modelType, model, idField);\n    },\n    updateModels: (state, { payload }) => {\n      const { modelType, models, idField } = payload;\n      models.forEach(model => update(state, modelType, model, idField));\n    },\n    updateModelsMap: (state, { payload }) => {\n      const { modelType, modelsMap, idField } = payload;\n      Object.values(modelsMap).forEach(model => update(state, modelType, model, idField));\n    },\n    removeModel: (state, { payload }) => {\n      const { modelType, id } = payload;\n      remove(state, modelType, id);\n    },\n    removeModels: (state, { payload }) => {\n      const { modelType, ids } = payload;\n      ids.forEach(id => remove(state, modelType, id));\n    },\n  },\n});\n\nexport const {\n  addModel,\n  addModels,\n  addModelsMap,\n  updateModel,\n  updateModels,\n  updateModelsMap,\n  removeModel,\n  removeModels,\n} = slice.actions;\n\nexport const { reducer } = slice;\n"],"mappings":"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"}