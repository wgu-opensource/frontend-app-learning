{"version":3,"sources":["../../../src/generic/notices/api.js"],"names":["getNotices","authenticatedUser","url","URL","LMS_BASE_URL","data","get","href","e","customAttributes","httpErrorStatus"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AAHA;AAKO,MAAMA,UAAU,GAAG,YAAY;AACpC,QAAMC,iBAAiB,GAAG,iCAA1B;AACA,QAAMC,GAAG,GAAG,IAAIC,GAAJ,CAAS,GAAE,mCAAYC,YAAa,gCAApC,CAAZ;;AACA,MAAIH,iBAAJ,EAAuB;AACrB,QAAI;AACF,YAAM;AAAEI,QAAAA;AAAF,UAAW,MAAM,wCAA6BC,GAA7B,CAAiCJ,GAAG,CAACK,IAArC,EAA2C,EAA3C,CAAvB;AACA,aAAOF,IAAP;AACD,KAHD,CAGE,OAAOG,CAAP,EAAU;AACV;AACA;AACA,YAAM;AAAEC,QAAAA,gBAAgB,EAAE;AAAEC,UAAAA;AAAF;AAApB,UAA4CF,CAAlD;;AACA,UAAIE,eAAe,KAAK,GAAxB,EAA6B;AAC3B,8BAAS,GAAEF,CAAE,mFAAb;AACD,OAFD,MAEO;AACL,+BAASA,CAAT;AACD;AACF;AACF;;AACD,SAAO,IAAP;AACD,CAnBM","sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport { getConfig } from '@edx/frontend-platform';\nimport { getAuthenticatedHttpClient, getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport { logError, logInfo } from '@edx/frontend-platform/logging';\n\nexport const getNotices = async () => {\n  const authenticatedUser = getAuthenticatedUser();\n  const url = new URL(`${getConfig().LMS_BASE_URL}/notices/api/v1/unacknowledged`);\n  if (authenticatedUser) {\n    try {\n      const { data } = await getAuthenticatedHttpClient().get(url.href, {});\n      return data;\n    } catch (e) {\n      // we will just swallow error, as that probably means the notices app is not installed.\n      // Notices are not necessary for the rest of courseware to function.\n      const { customAttributes: { httpErrorStatus } } = e;\n      if (httpErrorStatus === 404) {\n        logInfo(`${e}. This probably happened because the notices plugin is not installed on platform.`);\n      } else {\n        logError(e);\n      }\n    }\n  }\n  return null;\n};\n"],"file":"api.js"}