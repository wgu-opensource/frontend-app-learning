{"version":3,"file":"api.js","names":["_frontendPlatform","require","_auth","_logging","getNotices","authenticatedUser","getAuthenticatedUser","url","URL","getConfig","LMS_BASE_URL","data","getAuthenticatedHttpClient","get","href","e","customAttributes","httpErrorStatus","logInfo","logError","exports"],"sources":["../../../src/generic/notices/api.js"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport { getConfig } from '@edx/frontend-platform';\nimport { getAuthenticatedHttpClient, getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport { logError, logInfo } from '@edx/frontend-platform/logging';\n\nexport const getNotices = async () => {\n  const authenticatedUser = getAuthenticatedUser();\n  const url = new URL(`${getConfig().LMS_BASE_URL}/notices/api/v1/unacknowledged`);\n  if (authenticatedUser) {\n    try {\n      const { data } = await getAuthenticatedHttpClient().get(url.href, {});\n      return data;\n    } catch (e) {\n      // we will just swallow error, as that probably means the notices app is not installed.\n      // Notices are not necessary for the rest of courseware to function.\n      const { customAttributes: { httpErrorStatus } } = e;\n      if (httpErrorStatus === 404) {\n        logInfo(`${e}. This probably happened because the notices plugin is not installed on platform.`);\n      } else {\n        logError(e);\n      }\n    }\n  }\n  return null;\n};\n"],"mappings":";;;;;;AACA,IAAAA,iBAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAHA;;AAKO,MAAMG,UAAU,GAAG,MAAAA,CAAA,KAAY;EACpC,MAAMC,iBAAiB,GAAG,IAAAC,0BAAoB,EAAC,CAAC;EAChD,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAAE,GAAE,IAAAC,2BAAS,EAAC,CAAC,CAACC,YAAa,gCAA+B,CAAC;EAChF,IAAIL,iBAAiB,EAAE;IACrB,IAAI;MACF,MAAM;QAAEM;MAAK,CAAC,GAAG,MAAM,IAAAC,gCAA0B,EAAC,CAAC,CAACC,GAAG,CAACN,GAAG,CAACO,IAAI,EAAE,CAAC,CAAC,CAAC;MACrE,OAAOH,IAAI;IACb,CAAC,CAAC,OAAOI,CAAC,EAAE;MACV;MACA;MACA,MAAM;QAAEC,gBAAgB,EAAE;UAAEC;QAAgB;MAAE,CAAC,GAAGF,CAAC;MACnD,IAAIE,eAAe,KAAK,GAAG,EAAE;QAC3B,IAAAC,gBAAO,EAAE,GAAEH,CAAE,mFAAkF,CAAC;MAClG,CAAC,MAAM;QACL,IAAAI,iBAAQ,EAACJ,CAAC,CAAC;MACb;IACF;EACF;EACA,OAAO,IAAI;AACb,CAAC;AAACK,OAAA,CAAAhB,UAAA,GAAAA,UAAA"}