{"version":3,"sources":["../../../src/generic/notices/NoticesProvider.jsx"],"names":["NoticesProvider","children","isRedirected","setIsRedirected","ENABLE_NOTICES","data","results","length","window","location","replace","href","propTypes","PropTypes","node","isRequired"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,eAAe,GAAG,QAAkB;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AACxC,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkC,sBAAxC;AACA,wBAAU,YAAY;AACpB,QAAI,mCAAYC,cAAhB,EAAgC;AAC9B,YAAMC,IAAI,GAAG,MAAM,sBAAnB;;AACA,UAAIA,IAAI,IAAIA,IAAI,CAACC,OAAb,IAAwBD,IAAI,CAACC,OAAL,CAAaC,MAAb,GAAsB,CAAlD,EAAqD;AACnD,cAAM;AAAED,UAAAA;AAAF,YAAcD,IAApB;AACAF,QAAAA,eAAe,CAAC,IAAD,CAAf;AACAK,QAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAyB,GAAEJ,OAAO,CAAC,CAAD,CAAI,SAAQE,MAAM,CAACC,QAAP,CAAgBE,IAAK,EAAnE;AACD;AACF;AACF,GATD,EASG,EATH;AAWA,sBACE;AAAA,cACGT,YAAY,KAAK,IAAjB,GAAwB,IAAxB,GAA+BD;AADlC,IADF;AAKD,CAlBD;;AAoBAD,eAAe,CAACY,SAAhB,GAA4B;AAC1BX,EAAAA,QAAQ,EAAEY,mBAAUC,IAAV,CAAeC;AADC,CAA5B;eAIef,e","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getConfig } from '@edx/frontend-platform';\nimport PropTypes from 'prop-types';\nimport { getNotices } from './api';\n/**\n * This component uses the platform-plugin-notices plugin to function.\n * If the user has an unacknowledged notice, they will be rerouted off\n * course home and onto a full-screen notice page. If the plugin is not\n * installed, or there are no notices, we just passthrough this component.\n */\nconst NoticesProvider = ({ children }) => {\n  const [isRedirected, setIsRedirected] = useState();\n  useEffect(async () => {\n    if (getConfig().ENABLE_NOTICES) {\n      const data = await getNotices();\n      if (data && data.results && data.results.length > 0) {\n        const { results } = data;\n        setIsRedirected(true);\n        window.location.replace(`${results[0]}?next=${window.location.href}`);\n      }\n    }\n  }, []);\n\n  return (\n    <div>\n      {isRedirected === true ? null : children}\n    </div>\n  );\n};\n\nNoticesProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default NoticesProvider;\n"],"file":"NoticesProvider.js"}