{"version":3,"file":"AccountActivationAlert.js","names":["_react","_interopRequireWildcard","require","_jsCookie","_interopRequireDefault","_frontendPlatform","_auth","_paragon","_icons","_i18n","_data","_messages","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","AccountActivationAlert","_ref","intl","showModal","setShowModal","useState","showSpinner","setShowSpinner","showCheck","setShowCheck","handleOnClick","sendActivationEmail","then","showAccountActivationAlert","Cookies","undefined","remove","path","domain","process","env","SESSION_COOKIE_DOMAIN","button","jsxs","Button","variant","className","onClick","children","jsx","FormattedMessage","id","defaultMessage","description","values","siteName","getConfig","SITE_NAME","Icon","src","ArrowForward","bodyContent","message","boldEmail","getAuthenticatedUser","email","sendEmailTag","href","role","Spinner","animation","style","height","width","Check","AlertModal","isOpen","title","formatMessage","messages","accountActivationAlertTitle","footerNode","onClose","propTypes","intlShape","isRequired","_default","injectIntl","exports"],"sources":["../../../src/alerts/logistration-alert/AccountActivationAlert.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport Cookies from 'js-cookie';\nimport { getConfig } from '@edx/frontend-platform';\nimport { getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport {\n  AlertModal,\n  Button,\n  Spinner,\n  Icon,\n} from '@edx/paragon';\nimport { Check, ArrowForward } from '@edx/paragon/icons';\nimport { FormattedMessage, injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { sendActivationEmail } from '../../courseware/data';\nimport messages from './messages';\n\nconst AccountActivationAlert = ({\n  intl,\n}) => {\n  const [showModal, setShowModal] = useState(false);\n  const [showSpinner, setShowSpinner] = useState(false);\n  const [showCheck, setShowCheck] = useState(false);\n  const handleOnClick = () => {\n    setShowSpinner(true);\n    setShowCheck(false);\n    sendActivationEmail().then(() => {\n      setShowSpinner(false);\n      setShowCheck(true);\n    });\n  };\n\n  const showAccountActivationAlert = Cookies.get('show-account-activation-popup');\n  if (showAccountActivationAlert !== undefined) {\n    Cookies.remove('show-account-activation-popup', { path: '/', domain: process.env.SESSION_COOKIE_DOMAIN });\n    // extra check to make sure cookie was removed before updating the state. Updating the state without removal\n    // of cookie would make it infinite rendering\n    if (Cookies.get('show-account-activation-popup') === undefined) {\n      setShowModal(true);\n    }\n  }\n\n  const button = (\n    <Button\n      variant=\"primary\"\n      className=\"\"\n      onClick={() => setShowModal(false)}\n    >\n      <FormattedMessage\n        id=\"account-activation.alert.button\"\n        defaultMessage=\"Continue to {siteName}\"\n        description=\"account activation alert continue button\"\n        values={{\n          siteName: getConfig().SITE_NAME,\n        }}\n      />\n      <Icon src={ArrowForward} className=\"ml-1 d-inline-block align-bottom\" />\n    </Button>\n  );\n\n  const children = () => {\n    let bodyContent;\n    const message = (\n      <FormattedMessage\n        id=\"account-activation.alert.message\"\n        defaultMessage=\"We sent an email to {boldEmail} with a link to activate your account. Canâ€™t find it? Check your spam folder or\n        {sendEmailTag}.\"\n        description=\"Message for account activation alert which is shown after the registration\"\n        values={{\n          boldEmail: <b>{getAuthenticatedUser() && getAuthenticatedUser().email}</b>,\n          sendEmailTag: (\n          // eslint-disable-next-line jsx-a11y/anchor-is-valid\n            <a href=\"#\" role=\"button\" onClick={handleOnClick}>\n              <FormattedMessage\n                id=\"account-activation.resend.link\"\n                defaultMessage=\"resend the email\"\n                description=\"Message for resend link in account activation alert which is shown after the registration\"\n              />\n            </a>\n          ),\n        }}\n      />\n    );\n    bodyContent = (\n      <div>\n        {message}\n      </div>\n    );\n\n    if (!showCheck && showSpinner) {\n      bodyContent = (\n        <div>\n          {message}\n          <Spinner\n            animation=\"border\"\n            variant=\"secondary\"\n            style={{ height: '1.5rem', width: '1.5rem' }}\n          />\n        </div>\n      );\n    }\n\n    if (showCheck && !showSpinner) {\n      bodyContent = (\n        <div>\n          {message}\n          <Icon\n            src={Check}\n            style={{ height: '1.7rem', width: '1.25rem' }}\n            className=\"text-success-500 d-inline-block position-fixed\"\n          />\n        </div>\n      );\n    }\n    return bodyContent;\n  };\n\n  return (\n    <AlertModal\n      isOpen={showModal}\n      title={intl.formatMessage(messages.accountActivationAlertTitle)}\n      footerNode={button}\n      onClose={() => ({})}\n    >\n      {children()}\n    </AlertModal>\n  );\n};\n\nAccountActivationAlert.propTypes = {\n  intl: intlShape.isRequired,\n};\n\nexport default injectIntl(AccountActivationAlert);\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,iBAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AACA,IAAAK,QAAA,GAAAL,OAAA;AAMA,IAAAM,MAAA,GAAAN,OAAA;AACA,IAAAO,KAAA,GAAAP,OAAA;AACA,IAAAQ,KAAA,GAAAR,OAAA;AACA,IAAAS,SAAA,GAAAP,sBAAA,CAAAF,OAAA;AAAkC,IAAAU,WAAA,GAAAV,OAAA;AAAA,SAAAE,uBAAAS,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAhB,wBAAAY,GAAA,EAAAI,WAAA,SAAAA,WAAA,IAAAJ,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAQ,KAAA,GAAAL,wBAAA,CAAAC,WAAA,OAAAI,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAT,GAAA,YAAAQ,KAAA,CAAAE,GAAA,CAAAV,GAAA,SAAAW,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAhB,GAAA,QAAAgB,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAnB,GAAA,EAAAgB,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAf,GAAA,EAAAgB,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAhB,GAAA,CAAAgB,GAAA,SAAAL,MAAA,CAAAT,OAAA,GAAAF,GAAA,MAAAQ,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAArB,GAAA,EAAAW,MAAA,YAAAA,MAAA;AAElC,MAAMW,sBAAsB,GAAGC,IAAA,IAEzB;EAAA,IAF0B;IAC9BC;EACF,CAAC,GAAAD,IAAA;EACC,MAAM,CAACE,SAAS,EAAEC,YAAY,CAAC,GAAG,IAAAC,eAAQ,EAAC,KAAK,CAAC;EACjD,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG,IAAAF,eAAQ,EAAC,KAAK,CAAC;EACrD,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAG,IAAAJ,eAAQ,EAAC,KAAK,CAAC;EACjD,MAAMK,aAAa,GAAGA,CAAA,KAAM;IAC1BH,cAAc,CAAC,IAAI,CAAC;IACpBE,YAAY,CAAC,KAAK,CAAC;IACnB,IAAAE,yBAAmB,EAAC,CAAC,CAACC,IAAI,CAAC,MAAM;MAC/BL,cAAc,CAAC,KAAK,CAAC;MACrBE,YAAY,CAAC,IAAI,CAAC;IACpB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMI,0BAA0B,GAAGC,iBAAO,CAAC1B,GAAG,CAAC,+BAA+B,CAAC;EAC/E,IAAIyB,0BAA0B,KAAKE,SAAS,EAAE;IAC5CD,iBAAO,CAACE,MAAM,CAAC,+BAA+B,EAAE;MAAEC,IAAI,EAAE,GAAG;MAAEC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC;IAAsB,CAAC,CAAC;IACzG;IACA;IACA,IAAIP,iBAAO,CAAC1B,GAAG,CAAC,+BAA+B,CAAC,KAAK2B,SAAS,EAAE;MAC9DX,YAAY,CAAC,IAAI,CAAC;IACpB;EACF;EAEA,MAAMkB,MAAM,gBACV,IAAA7C,WAAA,CAAA8C,IAAA,EAACnD,QAAA,CAAAoD,MAAM;IACLC,OAAO,EAAC,SAAS;IACjBC,SAAS,EAAC,EAAE;IACZC,OAAO,EAAEA,CAAA,KAAMvB,YAAY,CAAC,KAAK,CAAE;IAAAwB,QAAA,gBAEnC,IAAAnD,WAAA,CAAAoD,GAAA,EAACvD,KAAA,CAAAwD,gBAAgB;MACfC,EAAE,EAAC,iCAAiC;MACpCC,cAAc,EAAC,wBAAwB;MACvCC,WAAW,EAAC,0CAA0C;MACtDC,MAAM,EAAE;QACNC,QAAQ,EAAE,IAAAC,2BAAS,EAAC,CAAC,CAACC;MACxB;IAAE,CACH,CAAC,eACF,IAAA5D,WAAA,CAAAoD,GAAA,EAACzD,QAAA,CAAAkE,IAAI;MAACC,GAAG,EAAEC,mBAAa;MAACd,SAAS,EAAC;IAAkC,CAAE,CAAC;EAAA,CAClE,CACT;EAED,MAAME,QAAQ,GAAGA,CAAA,KAAM;IACrB,IAAIa,WAAW;IACf,MAAMC,OAAO,gBACX,IAAAjE,WAAA,CAAAoD,GAAA,EAACvD,KAAA,CAAAwD,gBAAgB;MACfC,EAAE,EAAC,kCAAkC;MACrCC,cAAc,EAAC,qIACC;MAChBC,WAAW,EAAC,4EAA4E;MACxFC,MAAM,EAAE;QACNS,SAAS,eAAE,IAAAlE,WAAA,CAAAoD,GAAA;UAAAD,QAAA,EAAI,IAAAgB,0BAAoB,EAAC,CAAC,IAAI,IAAAA,0BAAoB,EAAC,CAAC,CAACC;QAAK,CAAI,CAAC;QAC1EC,YAAY;QAAA;QACZ;QACE,IAAArE,WAAA,CAAAoD,GAAA;UAAGkB,IAAI,EAAC,GAAG;UAACC,IAAI,EAAC,QAAQ;UAACrB,OAAO,EAAEjB,aAAc;UAAAkB,QAAA,eAC/C,IAAAnD,WAAA,CAAAoD,GAAA,EAACvD,KAAA,CAAAwD,gBAAgB;YACfC,EAAE,EAAC,gCAAgC;YACnCC,cAAc,EAAC,kBAAkB;YACjCC,WAAW,EAAC;UAA2F,CACxG;QAAC,CACD;MAEP;IAAE,CACH,CACF;IACDQ,WAAW,gBACT,IAAAhE,WAAA,CAAAoD,GAAA;MAAAD,QAAA,EACGc;IAAO,CACL,CACN;IAED,IAAI,CAAClC,SAAS,IAAIF,WAAW,EAAE;MAC7BmC,WAAW,gBACT,IAAAhE,WAAA,CAAA8C,IAAA;QAAAK,QAAA,GACGc,OAAO,eACR,IAAAjE,WAAA,CAAAoD,GAAA,EAACzD,QAAA,CAAA6E,OAAO;UACNC,SAAS,EAAC,QAAQ;UAClBzB,OAAO,EAAC,WAAW;UACnB0B,KAAK,EAAE;YAAEC,MAAM,EAAE,QAAQ;YAAEC,KAAK,EAAE;UAAS;QAAE,CAC9C,CAAC;MAAA,CACC,CACN;IACH;IAEA,IAAI7C,SAAS,IAAI,CAACF,WAAW,EAAE;MAC7BmC,WAAW,gBACT,IAAAhE,WAAA,CAAA8C,IAAA;QAAAK,QAAA,GACGc,OAAO,eACR,IAAAjE,WAAA,CAAAoD,GAAA,EAACzD,QAAA,CAAAkE,IAAI;UACHC,GAAG,EAAEe,YAAM;UACXH,KAAK,EAAE;YAAEC,MAAM,EAAE,QAAQ;YAAEC,KAAK,EAAE;UAAU,CAAE;UAC9C3B,SAAS,EAAC;QAAgD,CAC3D,CAAC;MAAA,CACC,CACN;IACH;IACA,OAAOe,WAAW;EACpB,CAAC;EAED,oBACE,IAAAhE,WAAA,CAAAoD,GAAA,EAACzD,QAAA,CAAAmF,UAAU;IACTC,MAAM,EAAErD,SAAU;IAClBsD,KAAK,EAAEvD,IAAI,CAACwD,aAAa,CAACC,iBAAQ,CAACC,2BAA2B,CAAE;IAChEC,UAAU,EAAEvC,MAAO;IACnBwC,OAAO,EAAEA,CAAA,MAAO,CAAC,CAAC,CAAE;IAAAlC,QAAA,EAEnBA,QAAQ,CAAC;EAAC,CACD,CAAC;AAEjB,CAAC;AAED5B,sBAAsB,CAAC+D,SAAS,GAAG;EACjC7D,IAAI,EAAE8D,eAAS,CAACC;AAClB,CAAC;AAAC,IAAAC,QAAA,GAEa,IAAAC,gBAAU,EAACnE,sBAAsB,CAAC;AAAAoE,OAAA,CAAAxF,OAAA,GAAAsF,QAAA"}