{"version":3,"file":"AccessExpirationAlert.js","names":["_propTypes","_interopRequireDefault","require","_analytics","_i18n","_paragon","_icons","_messages","_jsxRuntime","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","AccessExpirationAlert","_ref","intl","payload","accessExpiration","courseId","org","userTimezone","analyticsPageName","timezoneFormatArgs","timeZone","expirationDate","upgradeDeadline","upgradeUrl","logClick","sendTrackEvent","org_key","courserun_key","linkCategory","linkName","linkType","pageName","deadlineMessage","jsxs","Fragment","children","jsx","FormattedMessage","id","defaultMessage","description","values","date","FormattedDate","day","month","year","Hyperlink","className","style","textDecoration","destination","onClick","formatMessage","messages","upgradeNow","Alert","variant","icon","Info","propTypes","intlShape","isRequired","PropTypes","shape","string","masqueradingExpiredCourse","bool","_default","injectIntl","exports"],"sources":["../../../src/alerts/access-expiration-alert/AccessExpirationAlert.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\nimport {\n  FormattedMessage, FormattedDate, injectIntl, intlShape,\n} from '@edx/frontend-platform/i18n';\nimport { Alert, Hyperlink } from '@edx/paragon';\nimport { Info } from '@edx/paragon/icons';\n\nimport messages from './messages';\n\nconst AccessExpirationAlert = ({ intl, payload }) => {\n  const {\n    accessExpiration,\n    courseId,\n    org,\n    userTimezone,\n    analyticsPageName,\n  } = payload;\n  const timezoneFormatArgs = userTimezone ? { timeZone: userTimezone } : {};\n\n  if (!accessExpiration) {\n    return null;\n  }\n\n  const {\n    expirationDate,\n    upgradeDeadline,\n    upgradeUrl,\n  } = accessExpiration;\n\n  const logClick = () => {\n    sendTrackEvent('edx.bi.ecommerce.upsell_links_clicked', {\n      org_key: org,\n      courserun_key: courseId,\n      linkCategory: 'FBE_banner',\n      linkName: `${analyticsPageName}_audit_access_expires`,\n      linkType: 'link',\n      pageName: analyticsPageName,\n    });\n  };\n\n  let deadlineMessage = null;\n  if (upgradeDeadline && upgradeUrl) {\n    deadlineMessage = (\n      <>\n        <br />\n        <FormattedMessage\n          id=\"learning.accessExpiration.deadline\"\n          defaultMessage=\"Upgrade by {date} to get unlimited access to the course as long as it exists on the site.\"\n          description=\"Warning shown to learner to upgrade while they are enrolled on the audit version and it's possible to upgrade\"\n          values={{\n            date: (\n              <FormattedDate\n                key=\"accessExpirationUpgradeDeadline\"\n                day=\"numeric\"\n                month=\"short\"\n                year=\"numeric\"\n                value={upgradeDeadline}\n                {...timezoneFormatArgs}\n              />\n            ),\n          }}\n        />\n        &nbsp;\n        <Hyperlink\n          className=\"font-weight-bold\"\n          style={{ textDecoration: 'underline' }}\n          destination={upgradeUrl}\n          onClick={logClick}\n        >\n          {intl.formatMessage(messages.upgradeNow)}\n        </Hyperlink>\n      </>\n    );\n  }\n\n  return (\n    <Alert variant=\"info\" icon={Info}>\n      <span className=\"font-weight-bold\">\n        <FormattedMessage\n          id=\"learning.accessExpiration.header\"\n          defaultMessage=\"Audit Access Expires {date}\"\n          description=\"Headline for auditing deadline\"\n          values={{\n            date: (\n              <FormattedDate\n                key=\"accessExpirationHeaderDate\"\n                day=\"numeric\"\n                month=\"short\"\n                year=\"numeric\"\n                value={expirationDate}\n                {...timezoneFormatArgs}\n              />\n            ),\n          }}\n        />\n      </span>\n      <br />\n      <FormattedMessage\n        id=\"learning.accessExpiration.body\"\n        defaultMessage=\"You lose all access to this course, including your progress, on {date}.\"\n        description=\"Message body to tell learner the consequences of course expiration.\"\n        values={{\n          date: (\n            <FormattedDate\n              key=\"accessExpirationBodyDate\"\n              day=\"numeric\"\n              month=\"short\"\n              year=\"numeric\"\n              value={expirationDate}\n              {...timezoneFormatArgs}\n            />\n          ),\n        }}\n      />\n      {deadlineMessage}\n    </Alert>\n  );\n};\n\nAccessExpirationAlert.propTypes = {\n  intl: intlShape.isRequired,\n  payload: PropTypes.shape({\n    accessExpiration: PropTypes.shape({\n      expirationDate: PropTypes.string.isRequired,\n      masqueradingExpiredCourse: PropTypes.bool.isRequired,\n      upgradeDeadline: PropTypes.string,\n      upgradeUrl: PropTypes.string,\n    }).isRequired,\n    courseId: PropTypes.string.isRequired,\n    org: PropTypes.string.isRequired,\n    userTimezone: PropTypes.string.isRequired,\n    analyticsPageName: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default injectIntl(AccessExpirationAlert);\n"],"mappings":"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"}