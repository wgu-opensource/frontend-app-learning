{"version":3,"sources":["../../../src/alerts/enrollment-alert/clickHook.js"],"names":["useEnrollClickHandler","courseId","orgId","successText","loading","setLoading","addFlash","UserMessagesContext","enrollClickHandler","then","dismissible","flash","text","type","ALERT_TYPES","SUCCESS","topic","org_key","courserun_key","global","location","reload"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AAEA;;AAEA;AAEA,SAASA,qBAAT,CAA+BC,QAA/B,EAAyCC,KAAzC,EAAgDC,WAAhD,EAA6D;AAC3D,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwB,qBAAS,KAAT,CAA9B;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAe,uBAAWC,iCAAX,CAArB;AACA,QAAMC,kBAAkB,GAAG,wBAAY,MAAM;AAC3CH,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,mCAAqBJ,QAArB,EAA+BQ,IAA/B,CAAoC,MAAM;AACxCH,MAAAA,QAAQ,CAAC;AACPI,QAAAA,WAAW,EAAE,IADN;AAEPC,QAAAA,KAAK,EAAE,IAFA;AAGPC,QAAAA,IAAI,EAAET,WAHC;AAIPU,QAAAA,IAAI,EAAEC,0BAAYC,OAJX;AAKPC,QAAAA,KAAK,EAAE;AALA,OAAD,CAAR;AAOAX,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA,qCAAe,oCAAf,EAAqD;AACnDY,QAAAA,OAAO,EAAEf,KAD0C;AAEnDgB,QAAAA,aAAa,EAAEjB;AAFoC,OAArD;AAIAkB,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,KAdD;AAeD,GAjB0B,EAiBxB,CAACpB,QAAD,CAjBwB,CAA3B;AAmBA,SAAO;AAAEO,IAAAA,kBAAF;AAAsBJ,IAAAA;AAAtB,GAAP;AACD;;eAEcJ,qB","sourcesContent":["import { useContext, useState, useCallback } from 'react';\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\n\nimport { UserMessagesContext, ALERT_TYPES } from '../../generic/user-messages';\n\nimport { postCourseEnrollment } from './data/api';\n\n// Separated into its own file to avoid a circular dependency inside this directory\n\nfunction useEnrollClickHandler(courseId, orgId, successText) {\n  const [loading, setLoading] = useState(false);\n  const { addFlash } = useContext(UserMessagesContext);\n  const enrollClickHandler = useCallback(() => {\n    setLoading(true);\n    postCourseEnrollment(courseId).then(() => {\n      addFlash({\n        dismissible: true,\n        flash: true,\n        text: successText,\n        type: ALERT_TYPES.SUCCESS,\n        topic: 'course',\n      });\n      setLoading(false);\n      sendTrackEvent('edx.bi.user.course-home.enrollment', {\n        org_key: orgId,\n        courserun_key: courseId,\n      });\n      global.location.reload();\n    });\n  }, [courseId]);\n\n  return { enrollClickHandler, loading };\n}\n\nexport default useEnrollClickHandler;\n"],"file":"clickHook.js"}