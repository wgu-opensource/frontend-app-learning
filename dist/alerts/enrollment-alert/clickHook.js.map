{"version":3,"file":"clickHook.js","names":["_react","require","_analytics","_userMessages","_api","useEnrollClickHandler","courseId","orgId","successText","loading","setLoading","useState","addFlash","useContext","UserMessagesContext","enrollClickHandler","useCallback","postCourseEnrollment","then","dismissible","flash","text","type","ALERT_TYPES","SUCCESS","topic","sendTrackEvent","org_key","courserun_key","global","location","reload","_default","exports","default"],"sources":["../../../src/alerts/enrollment-alert/clickHook.js"],"sourcesContent":["import { useContext, useState, useCallback } from 'react';\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\n\nimport { UserMessagesContext, ALERT_TYPES } from '../../generic/user-messages';\n\nimport { postCourseEnrollment } from './data/api';\n\n// Separated into its own file to avoid a circular dependency inside this directory\n\nfunction useEnrollClickHandler(courseId, orgId, successText) {\n  const [loading, setLoading] = useState(false);\n  const { addFlash } = useContext(UserMessagesContext);\n  const enrollClickHandler = useCallback(() => {\n    setLoading(true);\n    postCourseEnrollment(courseId).then(() => {\n      addFlash({\n        dismissible: true,\n        flash: true,\n        text: successText,\n        type: ALERT_TYPES.SUCCESS,\n        topic: 'course',\n      });\n      setLoading(false);\n      sendTrackEvent('edx.bi.user.course-home.enrollment', {\n        org_key: orgId,\n        courserun_key: courseId,\n      });\n      global.location.reload();\n    });\n  }, [addFlash, courseId, orgId, successText]);\n\n  return { enrollClickHandler, loading };\n}\n\nexport default useEnrollClickHandler;\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAD,OAAA;AAEA,IAAAE,aAAA,GAAAF,OAAA;AAEA,IAAAG,IAAA,GAAAH,OAAA;AAEA;;AAEA,SAASI,qBAAqBA,CAACC,QAAQ,EAAEC,KAAK,EAAEC,WAAW,EAAE;EAC3D,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG,IAAAC,eAAQ,EAAC,KAAK,CAAC;EAC7C,MAAM;IAAEC;EAAS,CAAC,GAAG,IAAAC,iBAAU,EAACC,iCAAmB,CAAC;EACpD,MAAMC,kBAAkB,GAAG,IAAAC,kBAAW,EAAC,MAAM;IAC3CN,UAAU,CAAC,IAAI,CAAC;IAChB,IAAAO,yBAAoB,EAACX,QAAQ,CAAC,CAACY,IAAI,CAAC,MAAM;MACxCN,QAAQ,CAAC;QACPO,WAAW,EAAE,IAAI;QACjBC,KAAK,EAAE,IAAI;QACXC,IAAI,EAAEb,WAAW;QACjBc,IAAI,EAAEC,yBAAW,CAACC,OAAO;QACzBC,KAAK,EAAE;MACT,CAAC,CAAC;MACFf,UAAU,CAAC,KAAK,CAAC;MACjB,IAAAgB,yBAAc,EAAC,oCAAoC,EAAE;QACnDC,OAAO,EAAEpB,KAAK;QACdqB,aAAa,EAAEtB;MACjB,CAAC,CAAC;MACFuB,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IAC1B,CAAC,CAAC;EACJ,CAAC,EAAE,CAACnB,QAAQ,EAAEN,QAAQ,EAAEC,KAAK,EAAEC,WAAW,CAAC,CAAC;EAE5C,OAAO;IAAEO,kBAAkB;IAAEN;EAAQ,CAAC;AACxC;AAAC,IAAAuB,QAAA,GAEc3B,qBAAqB;AAAA4B,OAAA,CAAAC,OAAA,GAAAF,QAAA"}