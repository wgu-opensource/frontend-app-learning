{"version":3,"file":"TabPage.js","names":["_react","_interopRequireDefault","require","_propTypes","_i18n","_reactRedux","_reactRouter","_frontendComponentFooter","_paragon","_frontendComponentHeader","_PageLoading","_access","_modelStore","_messages","_messages2","_LoadedTabPage","_slice","_LaunchCourseHomeTourButton","_jsxRuntime","_excluded","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","sourceKeys","TabPage","_ref","intl","props","activeTabSlug","courseId","courseStatus","metadataModel","toastBodyLink","toastBodyText","toastHeader","useSelector","state","courseHome","dispatch","useDispatch","courseAccess","number","org","start","title","useModel","jsxs","Fragment","children","jsx","LearningHeader","srMessage","formatMessage","messages","loading","redirectUrl","getAccessDeniedRedirectUrl","Redirect","to","Toast","action","label","href","closeLabel","genericMessages","close","onClose","setCallToActionToast","header","link","link_text","show","srOnly","courseOrg","courseNumber","courseTitle","className","style","maxWidth","failure","defaultProps","unitId","propTypes","PropTypes","string","isRequired","intlShape","_default","injectIntl","exports"],"sources":["../../src/tab-page/TabPage.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect } from 'react-router';\n\nimport Footer from '@edx/frontend-component-footer';\nimport { Toast } from '@edx/paragon';\nimport { LearningHeader as Header } from '@edx/frontend-component-header';\nimport PageLoading from '../generic/PageLoading';\nimport { getAccessDeniedRedirectUrl } from '../shared/access';\nimport { useModel } from '../generic/model-store';\n\nimport genericMessages from '../generic/messages';\nimport messages from './messages';\nimport LoadedTabPage from './LoadedTabPage';\nimport { setCallToActionToast } from '../course-home/data/slice';\nimport LaunchCourseHomeTourButton from '../product-tours/newUserCourseHomeTour/LaunchCourseHomeTourButton';\n\nconst TabPage = ({ intl, ...props }) => {\n  const {\n    activeTabSlug,\n    courseId,\n    courseStatus,\n    metadataModel,\n  } = props;\n  const {\n    toastBodyLink,\n    toastBodyText,\n    toastHeader,\n  } = useSelector(state => state.courseHome);\n  const dispatch = useDispatch();\n  const {\n    courseAccess,\n    number,\n    org,\n    start,\n    title,\n  } = useModel('courseHomeMeta', courseId);\n\n  if (courseStatus === 'loading') {\n    return (\n      <>\n        <Header />\n        <PageLoading\n          srMessage={intl.formatMessage(messages.loading)}\n        />\n        <Footer />\n      </>\n    );\n  }\n\n  if (courseStatus === 'denied') {\n    const redirectUrl = getAccessDeniedRedirectUrl(courseId, activeTabSlug, courseAccess, start);\n    if (redirectUrl) {\n      return (<Redirect to={redirectUrl} />);\n    }\n  }\n\n  // Either a success state or a denied state that wasn't redirected above (some tabs handle denied states themselves,\n  // like the outline tab handling unenrolled learners)\n  if (courseStatus === 'loaded' || courseStatus === 'denied') {\n    return (\n      <>\n        <Toast\n          action={toastBodyText ? {\n            label: toastBodyText,\n            href: toastBodyLink,\n          } : null}\n          closeLabel={intl.formatMessage(genericMessages.close)}\n          onClose={() => dispatch(setCallToActionToast({ header: '', link: null, link_text: null }))}\n          show={!!(toastHeader)}\n        >\n          {toastHeader}\n        </Toast>\n        {metadataModel === 'courseHomeMeta' && (<LaunchCourseHomeTourButton srOnly />)}\n        <Header\n          courseOrg={org}\n          courseNumber={number}\n          courseTitle={title}\n        />\n        <LoadedTabPage {...props} />\n        <Footer />\n      </>\n    );\n  }\n\n  // courseStatus 'failed' and any other unexpected course status.\n  return (\n    <>\n      <Header />\n      <p className=\"text-center py-5 mx-auto\" style={{ maxWidth: '30em' }}>\n        {intl.formatMessage(messages.failure)}\n      </p>\n      <Footer />\n    </>\n  );\n};\n\nTabPage.defaultProps = {\n  courseId: null,\n  unitId: null,\n};\n\nTabPage.propTypes = {\n  activeTabSlug: PropTypes.string.isRequired,\n  intl: intlShape.isRequired,\n  courseId: PropTypes.string,\n  courseStatus: PropTypes.string.isRequired,\n  metadataModel: PropTypes.string.isRequired,\n  unitId: PropTypes.string,\n};\n\nexport default injectIntl(TabPage);\n"],"mappings":"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"}