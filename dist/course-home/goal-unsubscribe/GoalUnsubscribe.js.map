{"version":3,"file":"GoalUnsubscribe.js","names":["_react","require","_reactRouterDom","_analytics","_i18n","_frontendComponentHeader","_PageLoading","_interopRequireDefault","_api","_messages","_ResultPage","_jsxRuntime","obj","__esModule","default","GoalUnsubscribe","_ref","intl","token","useParams","error","setError","useState","isLoading","setIsLoading","data","setData","useEffect","unsubscribeFromCourseGoal","then","result","sendTrackEvent","jsxs","Fragment","children","jsx","LearningHeader","showUserDropdown","id","className","srMessage","formatMessage","messages","loading","courseTitle","propTypes","intlShape","isRequired","_default","injectIntl","exports"],"sources":["../../../src/course-home/goal-unsubscribe/GoalUnsubscribe.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\n\nimport { LearningHeader as Header } from '@edx/frontend-component-header';\nimport PageLoading from '../../generic/PageLoading';\nimport { unsubscribeFromCourseGoal } from '../data/api';\n\nimport messages from './messages';\nimport ResultPage from './ResultPage';\n\nconst GoalUnsubscribe = ({ intl }) => {\n  const { token } = useParams();\n  const [error, setError] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [data, setData] = useState({});\n\n  // We don't need to bother with redux for this simple page. We're not sharing state with other pages at all.\n  useEffect(() => {\n    unsubscribeFromCourseGoal(token)\n      .then(\n        (result) => {\n          setIsLoading(false);\n          setData(result.data);\n        },\n        () => {\n          setIsLoading(false);\n          setError(true);\n        },\n      );\n    // We unfortunately have no information about the user, course, org, or really anything\n    // as visiting this page is allowed to be done anonymously and without the context of the course.\n    // The token can be used to connect a user and course, it will just require some post-processing\n    sendTrackEvent('edx.ui.lms.goal.unsubscribe', { token });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // deps=[] to only run once\n\n  return (\n    <>\n      <Header showUserDropdown={false} />\n      <main id=\"main-content\" className=\"container my-5 text-center\">\n        {isLoading && (\n          <PageLoading srMessage={`${intl.formatMessage(messages.loading)}`} />\n        )}\n        {!isLoading && (\n          <ResultPage error={error} courseTitle={data.courseTitle} />\n        )}\n      </main>\n    </>\n  );\n};\n\nGoalUnsubscribe.propTypes = {\n  intl: intlShape.isRequired,\n};\n\nexport default injectIntl(GoalUnsubscribe);\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAF,OAAA;AACA,IAAAG,KAAA,GAAAH,OAAA;AAEA,IAAAI,wBAAA,GAAAJ,OAAA;AACA,IAAAK,YAAA,GAAAC,sBAAA,CAAAN,OAAA;AACA,IAAAO,IAAA,GAAAP,OAAA;AAEA,IAAAQ,SAAA,GAAAF,sBAAA,CAAAN,OAAA;AACA,IAAAS,WAAA,GAAAH,sBAAA,CAAAN,OAAA;AAAsC,IAAAU,WAAA,GAAAV,OAAA;AAAA,SAAAM,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtC,MAAMG,eAAe,GAAGC,IAAA,IAAc;EAAA,IAAb;IAAEC;EAAK,CAAC,GAAAD,IAAA;EAC/B,MAAM;IAAEE;EAAM,CAAC,GAAG,IAAAC,yBAAS,EAAC,CAAC;EAC7B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG,IAAAC,eAAQ,EAAC,KAAK,CAAC;EACzC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG,IAAAF,eAAQ,EAAC,IAAI,CAAC;EAChD,MAAM,CAACG,IAAI,EAAEC,OAAO,CAAC,GAAG,IAAAJ,eAAQ,EAAC,CAAC,CAAC,CAAC;;EAEpC;EACA,IAAAK,gBAAS,EAAC,MAAM;IACd,IAAAC,8BAAyB,EAACV,KAAK,CAAC,CAC7BW,IAAI,CACFC,MAAM,IAAK;MACVN,YAAY,CAAC,KAAK,CAAC;MACnBE,OAAO,CAACI,MAAM,CAACL,IAAI,CAAC;IACtB,CAAC,EACD,MAAM;MACJD,YAAY,CAAC,KAAK,CAAC;MACnBH,QAAQ,CAAC,IAAI,CAAC;IAChB,CACF,CAAC;IACH;IACA;IACA;IACA,IAAAU,yBAAc,EAAC,6BAA6B,EAAE;MAAEb;IAAM,CAAC,CAAC;IAC1D;EACA,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER,oBACE,IAAAP,WAAA,CAAAqB,IAAA,EAAArB,WAAA,CAAAsB,QAAA;IAAAC,QAAA,gBACE,IAAAvB,WAAA,CAAAwB,GAAA,EAAC9B,wBAAA,CAAA+B,cAAM;MAACC,gBAAgB,EAAE;IAAM,CAAE,CAAC,eACnC,IAAA1B,WAAA,CAAAqB,IAAA;MAAMM,EAAE,EAAC,cAAc;MAACC,SAAS,EAAC,4BAA4B;MAAAL,QAAA,GAC3DX,SAAS,iBACR,IAAAZ,WAAA,CAAAwB,GAAA,EAAC7B,YAAA,CAAAQ,OAAW;QAAC0B,SAAS,EAAG,GAAEvB,IAAI,CAACwB,aAAa,CAACC,iBAAQ,CAACC,OAAO,CAAE;MAAE,CAAE,CACrE,EACA,CAACpB,SAAS,iBACT,IAAAZ,WAAA,CAAAwB,GAAA,EAACzB,WAAA,CAAAI,OAAU;QAACM,KAAK,EAAEA,KAAM;QAACwB,WAAW,EAAEnB,IAAI,CAACmB;MAAY,CAAE,CAC3D;IAAA,CACG,CAAC;EAAA,CACP,CAAC;AAEP,CAAC;AAED7B,eAAe,CAAC8B,SAAS,GAAG;EAC1B5B,IAAI,EAAE6B,eAAS,CAACC;AAClB,CAAC;AAAC,IAAAC,QAAA,GAEa,IAAAC,gBAAU,EAAClC,eAAe,CAAC;AAAAmC,OAAA,CAAApC,OAAA,GAAAkC,QAAA"}