{"version":3,"sources":["../../../../../src/course-home/progress-tab/grades/detailed-grades/DetailedGrades.jsx"],"names":["DetailedGrades","intl","administrator","courseId","state","courseHome","org","tabs","gradesFeatureIsFullyLocked","gradesFeatureIsPartiallyLocked","sectionScores","hasSectionScores","length","logOutlineLinkClick","org_key","courserun_key","is_staff","overviewTab","find","tab","slug","overviewTabUrl","url","outlineLink","formatMessage","messages","courseOutline","detailedGrades","height","width","Blocked","gradeSummaryLimitedAccessExplanation","detailedGradesEmpty","propTypes","intlShape","isRequired"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AAEA;;;;;;AAEA,SAASA,cAAT,OAAkC;AAAA,MAAV;AAAEC,IAAAA;AAAF,GAAU;AAChC,QAAM;AAAEC,IAAAA;AAAF,MAAoB,iCAA1B;AACA,QAAM;AACJC,IAAAA;AADI,MAEF,6BAAYC,KAAK,IAAIA,KAAK,CAACC,UAA3B,CAFJ;AAGA,QAAM;AACJC,IAAAA,GADI;AAEJC,IAAAA;AAFI,MAGF,0BAAS,gBAAT,EAA2BJ,QAA3B,CAHJ;AAIA,QAAM;AACJK,IAAAA,0BADI;AAEJC,IAAAA,8BAFI;AAGJC,IAAAA;AAHI,MAIF,0BAAS,UAAT,EAAqBP,QAArB,CAJJ;AAMA,QAAMQ,gBAAgB,GAAGD,aAAa,CAACE,MAAd,GAAuB,CAAhD;;AAEA,QAAMC,mBAAmB,GAAG,MAAM;AAChC,mCAAe,wEAAf,EAAyF;AACvFC,MAAAA,OAAO,EAAER,GAD8E;AAEvFS,MAAAA,aAAa,EAAEZ,QAFwE;AAGvFa,MAAAA,QAAQ,EAAEd;AAH6E,KAAzF;AAKD,GAND;;AAQA,QAAMe,WAAW,GAAGV,IAAI,CAACW,IAAL,CAAUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,KAAa,SAA9B,CAApB;AACA,QAAMC,cAAc,GAAGJ,WAAW,IAAIA,WAAW,CAACK,GAAlD;AAEA,QAAMC,WAAW,GAAGF,cAAc,iBAChC,qBAAC,kBAAD;AACE,IAAA,OAAO,EAAC,OADV;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,WAAW,EAAEA,cAHf;AAIE,IAAA,OAAO,EAAER,mBAJX;AAKE,IAAA,QAAQ,EAAEL,0BAA0B,GAAG,IAAH,GAAU,GALhD;AAAA,cAOGP,IAAI,CAACuB,aAAL,CAAmBC,kBAASC,aAA5B;AAPH,IADF;AAYA,sBACE;AAAS,IAAA,SAAS,EAAC,eAAnB;AAAA,4BACE;AAAI,MAAA,SAAS,EAAC,SAAd;AAAA,gBAAyBzB,IAAI,CAACuB,aAAL,CAAmBC,kBAASE,cAA5B;AAAzB,MADF,EAEGlB,8BAA8B,iBAC7B;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA,8BACE,qBAAC,aAAD;AAAM,QAAA,SAAS,EAAC,yBAAhB;AAA0C,QAAA,KAAK,EAAE;AAAEmB,UAAAA,MAAM,EAAE,MAAV;AAAkBC,UAAAA,KAAK,EAAE;AAAzB,SAAjD;AAAoF,QAAA,GAAG,EAAEC,cAAzF;AAAkG,uBAAY;AAA9G,QADF,EAEG7B,IAAI,CAACuB,aAAL,CAAmBC,kBAASM,oCAA5B,CAFH;AAAA,MAHJ,EAQGpB,gBAAgB,iBACf,qBAAC,4BAAD,KATJ,EAWG,CAACA,gBAAD,iBACC;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA,gBAAsBV,IAAI,CAACuB,aAAL,CAAmBC,kBAASO,mBAA5B;AAAtB,MAZJ,EAcGX,cAAc,iBACb;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA,6BACE,qBAAC,sBAAD;AACE,QAAA,EAAE,EAAC,wBADL;AAEE,QAAA,cAAc,EAAC,0EAFjB;AAGE,QAAA,WAAW,EAAC,6DAHd;AAIE,QAAA,MAAM,EAAE;AAAEE,UAAAA;AAAF;AAJV;AADF,MAfJ;AAAA,IADF;AA2BD;;AAEDvB,cAAc,CAACiC,SAAf,GAA2B;AACzBhC,EAAAA,IAAI,EAAEiC,gBAAUC;AADS,CAA3B;;eAIe,sBAAWnC,cAAX,C","sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\nimport { getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport { FormattedMessage, injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { Blocked } from '@edx/paragon/icons';\nimport { Icon, Hyperlink } from '@edx/paragon';\nimport { useModel } from '../../../../generic/model-store';\n\nimport DetailedGradesTable from './DetailedGradesTable';\n\nimport messages from '../messages';\n\nfunction DetailedGrades({ intl }) {\n  const { administrator } = getAuthenticatedUser();\n  const {\n    courseId,\n  } = useSelector(state => state.courseHome);\n  const {\n    org,\n    tabs,\n  } = useModel('courseHomeMeta', courseId);\n  const {\n    gradesFeatureIsFullyLocked,\n    gradesFeatureIsPartiallyLocked,\n    sectionScores,\n  } = useModel('progress', courseId);\n\n  const hasSectionScores = sectionScores.length > 0;\n\n  const logOutlineLinkClick = () => {\n    sendTrackEvent('edx.ui.lms.course_progress.detailed_grades.course_outline_link.clicked', {\n      org_key: org,\n      courserun_key: courseId,\n      is_staff: administrator,\n    });\n  };\n\n  const overviewTab = tabs.find(tab => tab.slug === 'outline');\n  const overviewTabUrl = overviewTab && overviewTab.url;\n\n  const outlineLink = overviewTabUrl && (\n    <Hyperlink\n      variant=\"muted\"\n      isInline\n      destination={overviewTabUrl}\n      onClick={logOutlineLinkClick}\n      tabIndex={gradesFeatureIsFullyLocked ? '-1' : '0'}\n    >\n      {intl.formatMessage(messages.courseOutline)}\n    </Hyperlink>\n  );\n\n  return (\n    <section className=\"text-dark-700\">\n      <h3 className=\"h4 mb-3\">{intl.formatMessage(messages.detailedGrades)}</h3>\n      {gradesFeatureIsPartiallyLocked && (\n        <div className=\"mb-3 small ml-0 d-inline\">\n          <Icon className=\"mr-1 mt-1 d-inline-flex\" style={{ height: '1rem', width: '1rem' }} src={Blocked} data-testid=\"blocked-icon\" />\n          {intl.formatMessage(messages.gradeSummaryLimitedAccessExplanation)}\n        </div>\n      )}\n      {hasSectionScores && (\n        <DetailedGradesTable />\n      )}\n      {!hasSectionScores && (\n        <p className=\"small\">{intl.formatMessage(messages.detailedGradesEmpty)}</p>\n      )}\n      {overviewTabUrl && (\n        <p className=\"x-small m-0\">\n          <FormattedMessage\n            id=\"progress.ungradedAlert\"\n            defaultMessage=\"For progress on ungraded aspects of the course, view your {outlineLink}.\"\n            description=\"Text that precede link that redirect to course outline page\"\n            values={{ outlineLink }}\n          />\n        </p>\n      )}\n    </section>\n  );\n}\n\nDetailedGrades.propTypes = {\n  intl: intlShape.isRequired,\n};\n\nexport default injectIntl(DetailedGrades);\n"],"file":"DetailedGrades.js"}