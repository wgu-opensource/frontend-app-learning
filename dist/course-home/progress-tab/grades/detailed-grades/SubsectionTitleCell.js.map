{"version":3,"file":"SubsectionTitleCell.js","names":["_react","_interopRequireDefault","require","_reactRedux","_propTypes","_analytics","_auth","_i18n","_paragon","_icons","_messages","_modelStore","_ProblemScoreDrawer","_jsxRuntime","obj","__esModule","default","SubsectionTitleCell","_ref","intl","subsection","courseId","useSelector","state","courseHome","org","useModel","gradesFeatureIsFullyLocked","blockKey","displayName","problemScores","url","administrator","getAuthenticatedUser","logSubsectionClicked","sendTrackEvent","org_key","courserun_key","is_staff","assignment_block_key","jsxs","Collapsible","Advanced","children","Row","className","Trigger","formatMessage","messages","problemScoreToggleAltText","subsectionTitle","tabIndex","jsx","Visible","whenClosed","Icon","src","ArrowDropDown","whenOpen","ArrowDropUp","learnerHasAccess","id","noAccessToSubsection","style","height","width","Blocked","href","onClick","Body","override","Info","sectionGradeOverridden","propTypes","intlShape","isRequired","PropTypes","shape","string","bool","system","reason","arrayOf","earned","number","possible","_default","injectIntl","exports"],"sources":["../../../../../src/course-home/progress-tab/grades/detailed-grades/SubsectionTitleCell.jsx"],"sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\nimport { getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { Collapsible, Icon, Row } from '@edx/paragon';\nimport {\n  ArrowDropDown, ArrowDropUp, Blocked, Info,\n} from '@edx/paragon/icons';\n\nimport messages from '../messages';\nimport { useModel } from '../../../../generic/model-store';\nimport ProblemScoreDrawer from './ProblemScoreDrawer';\n\nconst SubsectionTitleCell = ({ intl, subsection }) => {\n  const {\n    courseId,\n  } = useSelector(state => state.courseHome);\n  const {\n    org,\n  } = useModel('courseHomeMeta', courseId);\n  const {\n    gradesFeatureIsFullyLocked,\n  } = useModel('progress', courseId);\n\n  const {\n    blockKey,\n    displayName,\n    problemScores,\n    url,\n  } = subsection;\n\n  const { administrator } = getAuthenticatedUser();\n  const logSubsectionClicked = () => {\n    sendTrackEvent('edx.ui.lms.course_progress.detailed_grades_assignment.clicked', {\n      org_key: org,\n      courserun_key: courseId,\n      is_staff: administrator,\n      assignment_block_key: blockKey,\n    });\n  };\n\n  return (\n    <Collapsible.Advanced>\n      <Row className=\"w-100 m-0\">\n        <Collapsible.Trigger\n          className=\"mr-1 position-absolute\"\n          aria-label={intl.formatMessage(messages.problemScoreToggleAltText, { subsectionTitle: displayName })}\n          tabIndex={gradesFeatureIsFullyLocked ? '-1' : '0'}\n        >\n          <Collapsible.Visible whenClosed><Icon src={ArrowDropDown} /></Collapsible.Visible>\n          <Collapsible.Visible whenOpen><Icon src={ArrowDropUp} /></Collapsible.Visible>\n        </Collapsible.Trigger>\n        <span className=\"small d-inline ml-4 pl-1\">\n          {gradesFeatureIsFullyLocked || subsection.learnerHasAccess ? ''\n            : (\n              <Icon\n                id={`detailedGradesBlockedIcon${subsection.blockKey}`}\n                aria-label={intl.formatMessage(messages.noAccessToSubsection, { displayName })}\n                className=\"mr-1 mt-1 d-inline-flex\"\n                style={{ height: '1rem', width: '1rem' }}\n                src={Blocked}\n                data-testid=\"blocked-icon\"\n              />\n            )}\n          {url ? (\n            <a\n              href={url}\n              className=\"muted-link small\"\n              onClick={logSubsectionClicked}\n              tabIndex={gradesFeatureIsFullyLocked ? '-1' : '0'}\n              aria-labelledby={`detailedGradesBlockedIcon${subsection.blockKey}`}\n            >\n              {displayName}\n            </a>\n          ) : (\n            <span className=\"greyed-out small\">{displayName}</span>\n          )}\n        </span>\n      </Row>\n      <Collapsible.Body className=\"d-flex w-100\">\n        <div className=\"col\">\n          { subsection.override && (\n            <div className=\"row w-100 m-0 x-small ml-4 pt-2 pl-1 text-gray-700 flex-nowrap\">\n              <div>\n                <Icon\n                  src={Info}\n                  className=\"x-small mr-1 text-primary-500\"\n                  style={{ height: '1.3em', width: '1.3em' }}\n                />\n              </div>\n              <div>{intl.formatMessage(messages.sectionGradeOverridden)}</div>\n            </div>\n          )}\n          <ProblemScoreDrawer problemScores={problemScores} subsection={subsection} />\n        </div>\n      </Collapsible.Body>\n    </Collapsible.Advanced>\n  );\n};\n\nSubsectionTitleCell.propTypes = {\n  intl: intlShape.isRequired,\n  subsection: PropTypes.shape({\n    blockKey: PropTypes.string.isRequired,\n    displayName: PropTypes.string.isRequired,\n    learnerHasAccess: PropTypes.bool.isRequired,\n    override: PropTypes.shape({\n      system: PropTypes.string,\n      reason: PropTypes.string,\n    }),\n    problemScores: PropTypes.arrayOf(PropTypes.shape({\n      earned: PropTypes.number.isRequired,\n      possible: PropTypes.number.isRequired,\n    })).isRequired,\n    url: PropTypes.string,\n  }).isRequired,\n};\n\nexport default injectIntl(SubsectionTitleCell);\n"],"mappings":"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"}