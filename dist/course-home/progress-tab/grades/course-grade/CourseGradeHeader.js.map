{"version":3,"sources":["../../../../../src/course-home/progress-tab/grades/course-grade/CourseGradeHeader.jsx"],"names":["CourseGradeHeader","intl","courseId","state","courseHome","org","verifiedMode","gradesFeatureIsFullyLocked","eventProperties","org_key","courserun_key","administrator","logUpgradeButtonClick","is_staff","linkCategory","linkName","linkType","pageName","previewText","formatMessage","messages","courseGradePreviewUnlockCertificateBody","courseGradePartialPreviewUnlockCertificateBody","courseGradePreviewUpgradeDeadlinePassedBody","Locked","courseGradePreviewHeaderAriaHidden","courseGradePreviewHeaderLocked","courseGradePreviewHeaderLimited","upgradeUrl","courseGradePreviewUpgradeButton","propTypes","intlShape","isRequired"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;;;;;AAEA,SAASA,iBAAT,OAAqC;AAAA,MAAV;AAAEC,IAAAA;AAAF,GAAU;AACnC,QAAM;AACJC,IAAAA;AADI,MAEF,6BAAYC,KAAK,IAAIA,KAAK,CAACC,UAA3B,CAFJ;AAGA,QAAM;AACJC,IAAAA;AADI,MAEF,0BAAS,gBAAT,EAA2BH,QAA3B,CAFJ;AAGA,QAAM;AACJI,IAAAA,YADI;AAEJC,IAAAA;AAFI,MAGF,0BAAS,UAAT,EAAqBL,QAArB,CAHJ;AAKA,QAAMM,eAAe,GAAG;AACtBC,IAAAA,OAAO,EAAEJ,GADa;AAEtBK,IAAAA,aAAa,EAAER;AAFO,GAAxB;AAKA,QAAM;AAAES,IAAAA;AAAF,MAAoB,iCAA1B;;AACA,QAAMC,qBAAqB,GAAG,MAAM;AAClC,mCAAe,mDAAf,EAAoE;AAClEH,MAAAA,OAAO,EAAEJ,GADyD;AAElEK,MAAAA,aAAa,EAAER,QAFmD;AAGlEW,MAAAA,QAAQ,EAAEF;AAHwD,KAApE;AAKA,mCAAe,uCAAf,kCACKH,eADL;AAEEM,MAAAA,YAAY,EAAE,QAFhB;AAGEC,MAAAA,QAAQ,EAAE,iBAHZ;AAIEC,MAAAA,QAAQ,EAAE,QAJZ;AAKEC,MAAAA,QAAQ,EAAE;AALZ;AAOD,GAbD;;AAcA,MAAIC,WAAJ;;AACA,MAAIZ,YAAJ,EAAkB;AAChBY,IAAAA,WAAW,GAAGX,0BAA0B,GACpCN,IAAI,CAACkB,aAAL,CAAmBC,kBAASC,uCAA5B,CADoC,GAEpCpB,IAAI,CAACkB,aAAL,CAAmBC,kBAASE,8CAA5B,CAFJ;AAGD,GAJD,MAIO;AACLJ,IAAAA,WAAW,GAAGjB,IAAI,CAACkB,aAAL,CAAmBC,kBAASG,2CAA5B,CAAd;AACD;;AACD,sBACE;AAAK,IAAA,SAAS,EAAC,yDAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAG,UAASjB,YAAY,GAAG,UAAH,GAAgB,EAAG,MAAzD;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,iCACE,qBAAC,aAAD;AAAM,YAAA,GAAG,EAAEkB;AAAX;AADF,UADF,eAIE;AAAK,UAAA,SAAS,EAAC,kCAAf;AAAA,kCACE;AAAM,2BAAY,MAAlB;AAAA,sBACGvB,IAAI,CAACkB,aAAL,CAAmBC,kBAASK,kCAA5B;AADH,YADF,EAIGlB,0BAA0B,GACvBN,IAAI,CAACkB,aAAL,CAAmBC,kBAASM,8BAA5B,CADuB,GAEvBzB,IAAI,CAACkB,aAAL,CAAmBC,kBAASO,+BAA5B,CANN;AAAA,UAJF;AAAA,QADF,eAcE;AAAK,QAAA,SAAS,EAAC,uCAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,0BAAf;AAAA,oBACGT;AADH;AADF,QAdF;AAAA,MADF,EAqBGZ,YAAY,iBACX;AAAK,MAAA,SAAS,EAAC,+DAAf;AAAA,6BACE,qBAAC,eAAD;AAAQ,QAAA,OAAO,EAAC,OAAhB;AAAwB,QAAA,IAAI,EAAC,IAA7B;AAAkC,QAAA,IAAI,EAAEA,YAAY,CAACsB,UAArD;AAAiE,QAAA,OAAO,EAAEhB,qBAA1E;AAAA,kBACGX,IAAI,CAACkB,aAAL,CAAmBC,kBAASS,+BAA5B;AADH;AADF,MAtBJ;AAAA,IADF;AA+BD;;AAED7B,iBAAiB,CAAC8B,SAAlB,GAA8B;AAC5B7B,EAAAA,IAAI,EAAE8B,gBAAUC;AADY,CAA9B;;eAIe,sBAAWhC,iBAAX,C","sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\nimport { getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { Locked } from '@edx/paragon/icons';\nimport { Button, Icon } from '@edx/paragon';\n\nimport { useModel } from '../../../../generic/model-store';\nimport messages from '../messages';\n\nfunction CourseGradeHeader({ intl }) {\n  const {\n    courseId,\n  } = useSelector(state => state.courseHome);\n  const {\n    org,\n  } = useModel('courseHomeMeta', courseId);\n  const {\n    verifiedMode,\n    gradesFeatureIsFullyLocked,\n  } = useModel('progress', courseId);\n\n  const eventProperties = {\n    org_key: org,\n    courserun_key: courseId,\n  };\n\n  const { administrator } = getAuthenticatedUser();\n  const logUpgradeButtonClick = () => {\n    sendTrackEvent('edx.ui.lms.course_progress.grades_upgrade.clicked', {\n      org_key: org,\n      courserun_key: courseId,\n      is_staff: administrator,\n    });\n    sendTrackEvent('edx.bi.ecommerce.upsell_links_clicked', {\n      ...eventProperties,\n      linkCategory: '(none)',\n      linkName: 'progress_locked',\n      linkType: 'button',\n      pageName: 'progress',\n    });\n  };\n  let previewText;\n  if (verifiedMode) {\n    previewText = gradesFeatureIsFullyLocked\n      ? intl.formatMessage(messages.courseGradePreviewUnlockCertificateBody)\n      : intl.formatMessage(messages.courseGradePartialPreviewUnlockCertificateBody);\n  } else {\n    previewText = intl.formatMessage(messages.courseGradePreviewUpgradeDeadlinePassedBody);\n  }\n  return (\n    <div className=\"row w-100 m-0 p-4 rounded-top bg-primary-500 text-white\">\n      <div className={`col-12 ${verifiedMode ? 'col-md-9' : ''} p-0`}>\n        <div className=\"row w-100 m-0 p-0\">\n          <div className=\"col-1 p-0\">\n            <Icon src={Locked} />\n          </div>\n          <div className=\"col-11 px-2 p-sm-0 h4 text-white\">\n            <span aria-hidden=\"true\">\n              {intl.formatMessage(messages.courseGradePreviewHeaderAriaHidden)}\n            </span>\n            {gradesFeatureIsFullyLocked\n              ? intl.formatMessage(messages.courseGradePreviewHeaderLocked)\n              : intl.formatMessage(messages.courseGradePreviewHeaderLimited)}\n          </div>\n        </div>\n        <div className=\"row w-100 m-0 p-0 justify-content-end\">\n          <div className=\"col-11 px-2 p-sm-0 small\">\n            {previewText}\n          </div>\n        </div>\n      </div>\n      {verifiedMode && (\n        <div className=\"col-12 col-md-3 mt-3 mt-md-0 p-0 align-self-center text-right\">\n          <Button variant=\"brand\" size=\"sm\" href={verifiedMode.upgradeUrl} onClick={logUpgradeButtonClick}>\n            {intl.formatMessage(messages.courseGradePreviewUpgradeButton)}\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nCourseGradeHeader.propTypes = {\n  intl: intlShape.isRequired,\n};\n\nexport default injectIntl(CourseGradeHeader);\n"],"file":"CourseGradeHeader.js"}