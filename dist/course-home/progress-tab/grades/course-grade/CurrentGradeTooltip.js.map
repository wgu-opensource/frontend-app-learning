{"version":3,"file":"CurrentGradeTooltip.js","names":["_react","_interopRequireDefault","require","_propTypes","_reactRedux","_i18n","_paragon","_modelStore","_messages","_jsxRuntime","obj","__esModule","default","CurrentGradeTooltip","_ref","intl","tooltipClassName","courseId","useSelector","state","courseHome","courseGrade","isPassing","percent","useModel","currentGrade","Number","toFixed","currentGradeDirection","isLocaleRtl","isRtl","getLocale","jsxs","Fragment","children","jsx","OverlayTrigger","show","placement","overlay","Popover","id","className","Content","cx","Math","min","cy","r","fill","x","style","transform","textAnchor","y","formatMessage","messages","currentGradeLabel","defaultProps","propTypes","intlShape","isRequired","PropTypes","string","_default","injectIntl","exports"],"sources":["../../../../../src/course-home/progress-tab/grades/course-grade/CurrentGradeTooltip.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\n\nimport {\n  getLocale, injectIntl, intlShape, isRtl,\n} from '@edx/frontend-platform/i18n';\nimport { OverlayTrigger, Popover } from '@edx/paragon';\n\nimport { useModel } from '../../../../generic/model-store';\n\nimport messages from '../messages';\n\nconst CurrentGradeTooltip = ({ intl, tooltipClassName }) => {\n  const {\n    courseId,\n  } = useSelector(state => state.courseHome);\n\n  const {\n    courseGrade: {\n      isPassing,\n      percent,\n    },\n  } = useModel('progress', courseId);\n\n  const currentGrade = Number((percent * 100).toFixed(0));\n\n  let currentGradeDirection = currentGrade < 50 ? '' : '-';\n\n  const isLocaleRtl = isRtl(getLocale());\n\n  if (isLocaleRtl) {\n    currentGradeDirection = currentGrade < 50 ? '-' : '';\n  }\n\n  return (\n    <>\n      <OverlayTrigger\n        show\n        placement=\"top\"\n        overlay={(\n          <Popover id={`${isPassing ? 'passing' : 'non-passing'}-grade-tooltip`} aria-hidden=\"true\" className={tooltipClassName}>\n            <Popover.Content data-testid=\"currentGradeTooltipContent\" className={isPassing ? 'text-white' : 'text-dark-700'}>\n              {currentGrade.toFixed(0)}{isLocaleRtl ? '\\u200f' : ''}%\n            </Popover.Content>\n          </Popover>\n        )}\n      >\n        <g>\n          <circle cx={`${Math.min(...[isLocaleRtl ? 100 - currentGrade : currentGrade, 100])}%`} cy=\"50%\" r=\"8.5\" fill=\"transparent\" />\n          <rect className=\"grade-bar__divider\" x={`${Math.min(...[isLocaleRtl ? 100 - currentGrade : currentGrade, 100])}%`} style={{ transform: 'translateY(2.61em)' }} />\n        </g>\n      </OverlayTrigger>\n      <text\n        className=\"x-small\"\n        textAnchor={currentGrade < 50 ? 'start' : 'end'}\n        x={`${Math.min(...[isLocaleRtl ? 100 - currentGrade : currentGrade, 100])}%`}\n        y=\"20px\"\n        style={{ transform: `translateX(${currentGradeDirection}3.4em)` }}\n      >\n        {intl.formatMessage(messages.currentGradeLabel)}\n      </text>\n    </>\n  );\n};\n\nCurrentGradeTooltip.defaultProps = {\n  tooltipClassName: '',\n};\n\nCurrentGradeTooltip.propTypes = {\n  intl: intlShape.isRequired,\n  tooltipClassName: PropTypes.string,\n};\n\nexport default injectIntl(CurrentGradeTooltip);\n"],"mappings":"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"}