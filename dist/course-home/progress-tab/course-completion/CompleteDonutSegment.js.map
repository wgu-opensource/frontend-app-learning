{"version":3,"file":"CompleteDonutSegment.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_i18n","_paragon","_messages","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","CompleteDonutSegment","_ref","completePercentage","intl","lockedPercentage","showCompletePopover","setShowCompletePopover","useState","completeSegmentOffset","completeTooltipDegree","lockedSegmentOffset","jsxs","className","onBlur","onFocus","tabIndex","children","jsx","OverlayTrigger","show","placement","overlay","Popover","Content","formatMessage","messages","completeContentTooltip","x","y","style","transform","cx","cy","r","strokeDasharray","strokeDashoffset","propTypes","PropTypes","number","isRequired","intlShape","_default","injectIntl","exports"],"sources":["../../../../src/course-home/progress-tab/course-completion/CompleteDonutSegment.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { OverlayTrigger, Popover } from '@edx/paragon';\n\nimport messages from './messages';\n\nconst CompleteDonutSegment = ({ completePercentage, intl, lockedPercentage }) => {\n  const [showCompletePopover, setShowCompletePopover] = useState(false);\n\n  if (!completePercentage) {\n    return null;\n  }\n\n  const completeSegmentOffset = (3.6 * completePercentage) / 8;\n  let completeTooltipDegree = completePercentage < 100 ? -completeSegmentOffset : 0;\n\n  const lockedSegmentOffset = lockedPercentage - 75;\n  if (lockedPercentage > 0) {\n    completeTooltipDegree = (lockedSegmentOffset + completePercentage) * -3.6 + 90 + completeSegmentOffset;\n  }\n\n  return (\n    <g\n      className=\"donut-segment-group\"\n      onBlur={() => setShowCompletePopover(false)}\n      onFocus={() => setShowCompletePopover(true)}\n      tabIndex=\"-1\"\n    >\n      {/* Tooltip */}\n      <OverlayTrigger\n        show={showCompletePopover}\n        placement=\"top\"\n        overlay={(\n          <Popover aria-hidden=\"true\">\n            <Popover.Content>\n              {intl.formatMessage(messages.completeContentTooltip)}\n            </Popover.Content>\n          </Popover>\n        )}\n      >\n        {/* Used to anchor the tooltip within the complete segment's stroke */}\n        <rect x=\"19\" y=\"3\" style={{ transform: `rotate(${completeTooltipDegree}deg)` }} />\n      </OverlayTrigger>\n\n      {/* Complete segment */}\n      <circle\n        className=\"donut-segment complete-stroke\"\n        cx=\"21\"\n        cy=\"21\"\n        r=\"15.91549430918954\"\n        strokeDasharray={`${completePercentage} ${100 - completePercentage}`}\n        strokeDashoffset={lockedSegmentOffset + completePercentage}\n      />\n\n      {/* Segment dividers */}\n      {lockedPercentage > 0 && lockedPercentage < 100 && (\n        <circle\n          cx=\"21\"\n          cy=\"21\"\n          r=\"15.91549430918954\"\n          className=\"donut-segment divider-stroke\"\n          strokeDasharray=\"0.3 99.7\"\n          strokeDashoffset={0.15 + lockedSegmentOffset}\n        />\n      )}\n      {completePercentage < 100 && lockedPercentage > 0 && lockedPercentage < 100\n      && lockedPercentage + completePercentage === 100 && (\n        <circle\n          cx=\"21\"\n          cy=\"21\"\n          r=\"15.91549430918954\"\n          className=\"donut-segment divider-stroke\"\n          strokeDasharray=\"0.3 99.7\"\n          strokeDashoffset=\"25.15\"\n        />\n      )}\n    </g>\n  );\n};\n\nCompleteDonutSegment.propTypes = {\n  completePercentage: PropTypes.number.isRequired,\n  intl: intlShape.isRequired,\n  lockedPercentage: PropTypes.number.isRequired,\n};\n\nexport default injectIntl(CompleteDonutSegment);\n"],"mappings":"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"}