{"version":3,"file":"WelcomeMessage.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_i18n","_paragon","_truncateHtml","_reactRedux","_LmsHtmlFragment","_messages","_modelStore","_thunks","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","WelcomeMessage","_ref","courseId","intl","welcomeMessageHtml","useModel","display","setDisplay","useState","shortWelcomeMessageHtml","truncate","byWords","keepWhitespaces","messageCanBeShortened","length","showShortMessage","setShowShortMessage","dispatch","useDispatch","jsx","Alert","variant","stacked","dismissible","show","onClose","dismissWelcomeMessage","className","actions","Button","onClick","children","formatMessage","messages","welcomeMessageShowMoreButton","welcomeMessageShowLessButton","TransitionReplace","enterDuration","exitDuration","html","title","welcomeMessage","propTypes","PropTypes","string","isRequired","intlShape","_default","injectIntl","exports"],"sources":["../../../../src/course-home/outline-tab/widgets/WelcomeMessage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { Alert, Button, TransitionReplace } from '@edx/paragon';\nimport truncate from 'truncate-html';\n\nimport { useDispatch } from 'react-redux';\nimport LmsHtmlFragment from '../LmsHtmlFragment';\nimport messages from '../messages';\nimport { useModel } from '../../../generic/model-store';\nimport { dismissWelcomeMessage } from '../../data/thunks';\n\nconst WelcomeMessage = ({ courseId, intl }) => {\n  const {\n    welcomeMessageHtml,\n  } = useModel('outline', courseId);\n\n  const [display, setDisplay] = useState(true);\n\n  const shortWelcomeMessageHtml = truncate(welcomeMessageHtml, 100, { byWords: true, keepWhitespaces: true });\n  const messageCanBeShortened = shortWelcomeMessageHtml.length < welcomeMessageHtml.length;\n  const [showShortMessage, setShowShortMessage] = useState(messageCanBeShortened);\n  const dispatch = useDispatch();\n\n  if (!welcomeMessageHtml) {\n    return null;\n  }\n\n  return (\n    <Alert\n      data-testid=\"alert-container-welcome\"\n      variant=\"light\"\n      stacked\n      dismissible\n      show={display}\n      onClose={() => {\n        setDisplay(false);\n        dispatch(dismissWelcomeMessage(courseId));\n      }}\n      className=\"raised-card\"\n      actions={messageCanBeShortened ? [\n        <Button\n          onClick={() => setShowShortMessage(!showShortMessage)}\n          variant=\"outline-primary\"\n        >\n          {showShortMessage ? intl.formatMessage(messages.welcomeMessageShowMoreButton)\n            : intl.formatMessage(messages.welcomeMessageShowLessButton)}\n        </Button>,\n      ] : []}\n    >\n      <TransitionReplace className=\"mb-3\" enterDuration={400} exitDuration={200}>\n        {showShortMessage ? (\n          <LmsHtmlFragment\n            className=\"inline-link\"\n            data-testid=\"short-welcome-message-iframe\"\n            key=\"short-html\"\n            html={shortWelcomeMessageHtml}\n            title={intl.formatMessage(messages.welcomeMessage)}\n          />\n        ) : (\n          <LmsHtmlFragment\n            className=\"inline-link\"\n            data-testid=\"long-welcome-message-iframe\"\n            key=\"full-html\"\n            html={welcomeMessageHtml}\n            title={intl.formatMessage(messages.welcomeMessage)}\n          />\n        )}\n      </TransitionReplace>\n    </Alert>\n  );\n};\n\nWelcomeMessage.propTypes = {\n  courseId: PropTypes.string.isRequired,\n  intl: intlShape.isRequired,\n};\n\nexport default injectIntl(WelcomeMessage);\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEA,IAAAG,KAAA,GAAAH,OAAA;AACA,IAAAI,QAAA,GAAAJ,OAAA;AACA,IAAAK,aAAA,GAAAH,sBAAA,CAAAF,OAAA;AAEA,IAAAM,WAAA,GAAAN,OAAA;AACA,IAAAO,gBAAA,GAAAL,sBAAA,CAAAF,OAAA;AACA,IAAAQ,SAAA,GAAAN,sBAAA,CAAAF,OAAA;AACA,IAAAS,WAAA,GAAAT,OAAA;AACA,IAAAU,OAAA,GAAAV,OAAA;AAA0D,IAAAW,WAAA,GAAAX,OAAA;AAAA,SAAAE,uBAAAU,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAjB,wBAAAa,GAAA,EAAAI,WAAA,SAAAA,WAAA,IAAAJ,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAQ,KAAA,GAAAL,wBAAA,CAAAC,WAAA,OAAAI,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAT,GAAA,YAAAQ,KAAA,CAAAE,GAAA,CAAAV,GAAA,SAAAW,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAhB,GAAA,QAAAgB,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAnB,GAAA,EAAAgB,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAf,GAAA,EAAAgB,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAhB,GAAA,CAAAgB,GAAA,SAAAL,MAAA,CAAAT,OAAA,GAAAF,GAAA,MAAAQ,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAArB,GAAA,EAAAW,MAAA,YAAAA,MAAA;AAE1D,MAAMW,cAAc,GAAGC,IAAA,IAAwB;EAAA,IAAvB;IAAEC,QAAQ;IAAEC;EAAK,CAAC,GAAAF,IAAA;EACxC,MAAM;IACJG;EACF,CAAC,GAAG,IAAAC,oBAAQ,EAAC,SAAS,EAAEH,QAAQ,CAAC;EAEjC,MAAM,CAACI,OAAO,EAAEC,UAAU,CAAC,GAAG,IAAAC,eAAQ,EAAC,IAAI,CAAC;EAE5C,MAAMC,uBAAuB,GAAG,IAAAC,qBAAQ,EAACN,kBAAkB,EAAE,GAAG,EAAE;IAAEO,OAAO,EAAE,IAAI;IAAEC,eAAe,EAAE;EAAK,CAAC,CAAC;EAC3G,MAAMC,qBAAqB,GAAGJ,uBAAuB,CAACK,MAAM,GAAGV,kBAAkB,CAACU,MAAM;EACxF,MAAM,CAACC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG,IAAAR,eAAQ,EAACK,qBAAqB,CAAC;EAC/E,MAAMI,QAAQ,GAAG,IAAAC,uBAAW,EAAC,CAAC;EAE9B,IAAI,CAACd,kBAAkB,EAAE;IACvB,OAAO,IAAI;EACb;EAEA,oBACE,IAAA3B,WAAA,CAAA0C,GAAA,EAACjD,QAAA,CAAAkD,KAAK;IACJ,eAAY,yBAAyB;IACrCC,OAAO,EAAC,OAAO;IACfC,OAAO;IACPC,WAAW;IACXC,IAAI,EAAElB,OAAQ;IACdmB,OAAO,EAAEA,CAAA,KAAM;MACblB,UAAU,CAAC,KAAK,CAAC;MACjBU,QAAQ,CAAC,IAAAS,6BAAqB,EAACxB,QAAQ,CAAC,CAAC;IAC3C,CAAE;IACFyB,SAAS,EAAC,aAAa;IACvBC,OAAO,EAAEf,qBAAqB,GAAG,cAC/B,IAAApC,WAAA,CAAA0C,GAAA,EAACjD,QAAA,CAAA2D,MAAM;MACLC,OAAO,EAAEA,CAAA,KAAMd,mBAAmB,CAAC,CAACD,gBAAgB,CAAE;MACtDM,OAAO,EAAC,iBAAiB;MAAAU,QAAA,EAExBhB,gBAAgB,GAAGZ,IAAI,CAAC6B,aAAa,CAACC,iBAAQ,CAACC,4BAA4B,CAAC,GACzE/B,IAAI,CAAC6B,aAAa,CAACC,iBAAQ,CAACE,4BAA4B;IAAC,CACvD,CAAC,CACV,GAAG,EAAG;IAAAJ,QAAA,eAEP,IAAAtD,WAAA,CAAA0C,GAAA,EAACjD,QAAA,CAAAkE,iBAAiB;MAACT,SAAS,EAAC,MAAM;MAACU,aAAa,EAAE,GAAI;MAACC,YAAY,EAAE,GAAI;MAAAP,QAAA,EACvEhB,gBAAgB,gBACf,IAAAtC,WAAA,CAAA0C,GAAA,EAAC9C,gBAAA,CAAAO,OAAe;QACd+C,SAAS,EAAC,aAAa;QACvB,eAAY,8BAA8B;QAE1CY,IAAI,EAAE9B,uBAAwB;QAC9B+B,KAAK,EAAErC,IAAI,CAAC6B,aAAa,CAACC,iBAAQ,CAACQ,cAAc;MAAE,GAF/C,YAGL,CAAC,gBAEF,IAAAhE,WAAA,CAAA0C,GAAA,EAAC9C,gBAAA,CAAAO,OAAe;QACd+C,SAAS,EAAC,aAAa;QACvB,eAAY,6BAA6B;QAEzCY,IAAI,EAAEnC,kBAAmB;QACzBoC,KAAK,EAAErC,IAAI,CAAC6B,aAAa,CAACC,iBAAQ,CAACQ,cAAc;MAAE,GAF/C,WAGL;IACF,CACgB;EAAC,CACf,CAAC;AAEZ,CAAC;AAEDzC,cAAc,CAAC0C,SAAS,GAAG;EACzBxC,QAAQ,EAAEyC,kBAAS,CAACC,MAAM,CAACC,UAAU;EACrC1C,IAAI,EAAE2C,eAAS,CAACD;AAClB,CAAC;AAAC,IAAAE,QAAA,GAEa,IAAAC,gBAAU,EAAChD,cAAc,CAAC;AAAAiD,OAAA,CAAArE,OAAA,GAAAmE,QAAA"}