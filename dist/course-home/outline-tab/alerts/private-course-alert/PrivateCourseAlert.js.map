{"version":3,"file":"PrivateCourseAlert.js","names":["_react","_interopRequireDefault","require","_propTypes","_frontendPlatform","_i18n","_auth","_paragon","_reactFontawesome","_faSpinner","_messages","_messages2","_messages3","_messages4","_clickHook","_modelStore","_jsxRuntime","obj","__esModule","default","PrivateCourseAlert","_ref","intl","payload","anonymousUser","canEnroll","courseId","org","title","useModel","enrollClickHandler","loading","useEnrollClickHandler","formatMessage","enrollmentMessages","success","enrollNowButton","jsx","Button","disabled","variant","className","style","textDecoration","size","onClick","children","enrollNowInline","register","Hyperlink","destination","getConfig","LMS_BASE_URL","encodeURIComponent","global","location","href","genericMessages","registerLowercase","signIn","getLoginRedirectUrl","signInSentenceCase","jsxs","Alert","Fragment","alert","FormattedMessage","id","description","defaultMessage","values","outlineMessages","welcomeTo","messages","toAccess","FontAwesomeIcon","icon","faSpinner","spin","propTypes","intlShape","isRequired","PropTypes","shape","bool","string","_default","injectIntl","exports"],"sources":["../../../../../src/course-home/outline-tab/alerts/private-course-alert/PrivateCourseAlert.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getConfig } from '@edx/frontend-platform';\nimport { injectIntl, intlShape, FormattedMessage } from '@edx/frontend-platform/i18n';\nimport { getLoginRedirectUrl } from '@edx/frontend-platform/auth';\nimport { Alert, Button, Hyperlink } from '@edx/paragon';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons';\n\nimport enrollmentMessages from '../../../../alerts/enrollment-alert/messages';\nimport genericMessages from '../../../../generic/messages';\nimport messages from './messages';\nimport outlineMessages from '../../messages';\nimport useEnrollClickHandler from '../../../../alerts/enrollment-alert/clickHook';\nimport { useModel } from '../../../../generic/model-store';\n\nconst PrivateCourseAlert = ({ intl, payload }) => {\n  const {\n    anonymousUser,\n    canEnroll,\n    courseId,\n  } = payload;\n\n  const {\n    org,\n    title,\n  } = useModel('courseHomeMeta', courseId);\n\n  const { enrollClickHandler, loading } = useEnrollClickHandler(\n    courseId,\n    org,\n    intl.formatMessage(enrollmentMessages.success),\n  );\n\n  const enrollNowButton = (\n    <Button\n      disabled={loading}\n      variant=\"link\"\n      className=\"p-0 border-0 align-top mr-1\"\n      style={{ textDecoration: 'underline' }}\n      size=\"sm\"\n      onClick={enrollClickHandler}\n    >\n      {intl.formatMessage(enrollmentMessages.enrollNowInline)}\n    </Button>\n  );\n\n  const register = (\n    <Hyperlink\n      style={{ textDecoration: 'underline' }}\n      destination={`${getConfig().LMS_BASE_URL}/register?next=${encodeURIComponent(global.location.href)}`}\n    >\n      {intl.formatMessage(genericMessages.registerLowercase)}\n    </Hyperlink>\n  );\n\n  const signIn = (\n    <Hyperlink\n      style={{ textDecoration: 'underline' }}\n      destination={`${getLoginRedirectUrl(global.location.href)}`}\n    >\n      {intl.formatMessage(genericMessages.signInSentenceCase)}\n    </Hyperlink>\n  );\n\n  return (\n    <Alert variant=\"light\" data-testid=\"private-course-alert\">\n      {anonymousUser && (\n        <>\n          <p className=\"font-weight-bold\">\n            {intl.formatMessage(enrollmentMessages.alert)}\n          </p>\n          <FormattedMessage\n            id=\"learning.privateCourse.signInOrRegister\"\n            description=\"Prompts the user to sign in or register to see course content.\"\n            defaultMessage=\"{signIn} or {register} and then enroll in this course.\"\n            values={{\n              signIn,\n              register,\n            }}\n          />\n        </>\n      )}\n      {!anonymousUser && (\n        <>\n          <p className=\"font-weight-bold\">{intl.formatMessage(outlineMessages.welcomeTo)} {title}</p>\n          {canEnroll && (\n            <div className=\"d-flex\">\n              {enrollNowButton}\n              {intl.formatMessage(messages.toAccess)}\n              {loading && <FontAwesomeIcon icon={faSpinner} spin />}\n            </div>\n          )}\n          {!canEnroll && (\n            <>\n              {intl.formatMessage(enrollmentMessages.alert)}\n            </>\n          )}\n        </>\n      )}\n    </Alert>\n  );\n};\n\nPrivateCourseAlert.propTypes = {\n  intl: intlShape.isRequired,\n  payload: PropTypes.shape({\n    anonymousUser: PropTypes.bool,\n    canEnroll: PropTypes.bool,\n    courseId: PropTypes.string,\n  }).isRequired,\n};\n\nexport default injectIntl(PrivateCourseAlert);\n"],"mappings":"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"}