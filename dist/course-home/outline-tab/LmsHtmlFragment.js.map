{"version":3,"file":"LmsHtmlFragment.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_frontendPlatform","_jsxRuntime","_excluded","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","LmsHtmlFragment","_ref","className","html","title","rest","direction","document","documentElement","getAttribute","wholePage","getConfig","LMS_BASE_URL","LEGACY_THEME_NAME","BASE_URL","iframe","useRef","resetIframeHeight","current","contentWindow","body","height","scrollHeight","useEffect","receiveMessage","event","type","data","global","addEventListener","jsx","onLoad","ref","referrerPolicy","scrolling","srcDoc","defaultProps","propTypes","PropTypes","string","isRequired","_default","exports"],"sources":["../../../src/course-home/outline-tab/LmsHtmlFragment.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { getConfig } from '@edx/frontend-platform';\n\nconst LmsHtmlFragment = ({\n  className,\n  html,\n  title,\n  ...rest\n}) => {\n  const direction = document.documentElement?.getAttribute('dir') || 'ltr';\n  const wholePage = `\n    <html dir=\"${direction}\">\n      <head>\n        <base href=\"${getConfig().LMS_BASE_URL}\" target=\"_parent\">\n        <link rel=\"stylesheet\" href=\"/static/${getConfig().LEGACY_THEME_NAME ? `${getConfig().LEGACY_THEME_NAME}/` : ''}css/bootstrap/lms-main.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"${getConfig().BASE_URL}/static/LmsHtmlFragment.css\">\n      </head>\n      <body class=\"${className}\">${html}</body>\n      <script>\n        const resizer = new ResizeObserver(() => {\n          window.parent.postMessage({type: 'lmshtmlfragment.resize'}, '*');\n        });\n        resizer.observe(document.body);\n      </script>\n    </html>\n  `;\n\n  const iframe = useRef(null);\n  function resetIframeHeight() {\n    if (iframe?.current?.contentWindow?.document?.body) {\n      iframe.current.height = iframe.current.contentWindow.document.body.scrollHeight;\n    }\n  }\n\n  useEffect(() => {\n    function receiveMessage(event) {\n      const { type } = event.data;\n      if (type === 'lmshtmlfragment.resize') {\n        resetIframeHeight();\n      }\n    }\n    global.addEventListener('message', receiveMessage);\n  }, []);\n\n  return (\n    <iframe\n      className=\"w-100 border-0\"\n      onLoad={resetIframeHeight}\n      ref={iframe}\n      referrerPolicy=\"origin\"\n      scrolling=\"no\"\n      srcDoc={wholePage}\n      title={title}\n      {...rest}\n    />\n  );\n};\n\nLmsHtmlFragment.defaultProps = {\n  className: '',\n};\n\nLmsHtmlFragment.propTypes = {\n  className: PropTypes.string,\n  html: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n};\n\nexport default LmsHtmlFragment;\n"],"mappings":"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"}