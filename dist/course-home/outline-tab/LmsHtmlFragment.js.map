{"version":3,"sources":["../../../src/course-home/outline-tab/LmsHtmlFragment.jsx"],"names":["LmsHtmlFragment","className","html","title","rest","wholePage","LMS_BASE_URL","LEGACY_THEME_NAME","BASE_URL","iframe","resetIframeHeight","current","contentWindow","document","body","height","scrollHeight","receiveMessage","event","type","data","global","addEventListener","defaultProps","propTypes","PropTypes","string","isRequired"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;AAEe,SAASA,eAAT,OAKZ;AAAA,MALqC;AACtCC,IAAAA,SADsC;AAEtCC,IAAAA,IAFsC;AAGtCC,IAAAA;AAHsC,GAKrC;AAAA,MADEC,IACF;;AACD,QAAMC,SAAS,GAAI;AACrB;AACA;AACA,sBAAsB,mCAAYC,YAAa;AAC/C,+CAA+C,mCAAYC,iBAAZ,GAAiC,GAAE,mCAAYA,iBAAkB,GAAjE,GAAsE,EAAG;AACxH,uDAAuD,mCAAYC,QAAS;AAC5E;AACA,qBAAqBP,SAAU,KAAIC,IAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAfE;AAiBA,QAAMO,MAAM,GAAG,mBAAO,IAAP,CAAf;;AACA,WAASC,iBAAT,GAA6B;AAC3B,QAAID,MAAM,EAAEE,OAAR,EAAiBC,aAAjB,EAAgCC,QAAhC,EAA0CC,IAA9C,EAAoD;AAClDL,MAAAA,MAAM,CAACE,OAAP,CAAeI,MAAf,GAAwBN,MAAM,CAACE,OAAP,CAAeC,aAAf,CAA6BC,QAA7B,CAAsCC,IAAtC,CAA2CE,YAAnE;AACD;AACF;;AAED,wBAAU,MAAM;AACd,aAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAC7B,YAAM;AAAEC,QAAAA;AAAF,UAAWD,KAAK,CAACE,IAAvB;;AACA,UAAID,IAAI,KAAK,wBAAb,EAAuC;AACrCT,QAAAA,iBAAiB;AAClB;AACF;;AACDW,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCL,cAAnC;AACD,GARD,EAQG,EARH;AAUA,sBACE;AACE,IAAA,SAAS,EAAC,gBADZ;AAEE,IAAA,MAAM,EAAEP,iBAFV;AAGE,IAAA,GAAG,EAAED,MAHP;AAIE,IAAA,cAAc,EAAC,QAJjB;AAKE,IAAA,SAAS,EAAC,IALZ;AAME,IAAA,MAAM,EAAEJ,SANV;AAOE,IAAA,KAAK,EAAEF;AAPT,KAQMC,IARN,EADF;AAYD;;AAEDJ,eAAe,CAACuB,YAAhB,GAA+B;AAC7BtB,EAAAA,SAAS,EAAE;AADkB,CAA/B;AAIAD,eAAe,CAACwB,SAAhB,GAA4B;AAC1BvB,EAAAA,SAAS,EAAEwB,mBAAUC,MADK;AAE1BxB,EAAAA,IAAI,EAAEuB,mBAAUC,MAAV,CAAiBC,UAFG;AAG1BxB,EAAAA,KAAK,EAAEsB,mBAAUC,MAAV,CAAiBC;AAHE,CAA5B","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { getConfig } from '@edx/frontend-platform';\n\nexport default function LmsHtmlFragment({\n  className,\n  html,\n  title,\n  ...rest\n}) {\n  const wholePage = `\n    <html>\n      <head>\n        <base href=\"${getConfig().LMS_BASE_URL}\" target=\"_parent\">\n        <link rel=\"stylesheet\" href=\"/static/${getConfig().LEGACY_THEME_NAME ? `${getConfig().LEGACY_THEME_NAME}/` : ''}css/bootstrap/lms-main.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"${getConfig().BASE_URL}/src/course-home/outline-tab/LmsHtmlFragment.css\">\n      </head>\n      <body class=\"${className}\">${html}</body>\n      <script>\n        const resizer = new ResizeObserver(() => {\n          window.parent.postMessage({type: 'lmshtmlfragment.resize'}, '*');\n        });\n        resizer.observe(document.body);\n      </script>\n    </html>\n  `;\n\n  const iframe = useRef(null);\n  function resetIframeHeight() {\n    if (iframe?.current?.contentWindow?.document?.body) {\n      iframe.current.height = iframe.current.contentWindow.document.body.scrollHeight;\n    }\n  }\n\n  useEffect(() => {\n    function receiveMessage(event) {\n      const { type } = event.data;\n      if (type === 'lmshtmlfragment.resize') {\n        resetIframeHeight();\n      }\n    }\n    global.addEventListener('message', receiveMessage);\n  }, []);\n\n  return (\n    <iframe\n      className=\"w-100 border-0\"\n      onLoad={resetIframeHeight}\n      ref={iframe}\n      referrerPolicy=\"origin\"\n      scrolling=\"no\"\n      srcDoc={wholePage}\n      title={title}\n      {...rest}\n    />\n  );\n}\n\nLmsHtmlFragment.defaultProps = {\n  className: '',\n};\n\nLmsHtmlFragment.propTypes = {\n  className: PropTypes.string,\n  html: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n};\n"],"file":"LmsHtmlFragment.js"}