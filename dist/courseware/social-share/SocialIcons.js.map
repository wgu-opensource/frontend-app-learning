{"version":3,"file":"SocialIcons.js","names":["_react","_interopRequireDefault","require","_propTypes","_reactShare","_frontendPlatform","_analytics","_auth","_i18n","_messages","_modelStore","_jsxRuntime","obj","__esModule","default","SocialIcons","_ref","analyticsId","className","courseId","emailBody","emailSubject","hashtags","intl","socialMessage","marketingUrl","useModel","org","title","twitterUrl","getConfig","TWITTER_URL","twitterAccount","substring","lastIndexOf","logClick","service","administrator","getAuthenticatedUser","sendTrackEvent","org_key","courserun_key","course_id","is_staff","socialUtmCampaign","SOCIAL_UTM_MILESTONE_CAMPAIGN","socialUtmMarketingUrl","jsxs","children","LinkedinShareButton","beforeOnClick","url","jsx","LinkedinIcon","round","size","formatMessage","messages","shareService","TwitterShareButton","platform","TwitterIcon","FacebookShareButton","quote","SITE_NAME","FacebookIcon","EmailShareButton","body","subject","EmailIcon","shareEmail","defaultProps","defaultEmailBody","TWITTER_HASHTAG","propTypes","PropTypes","string","isRequired","shape","arrayOf","intlShape","_default","injectIntl","exports"],"sources":["../../../src/courseware/social-share/SocialIcons.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  EmailIcon,\n  EmailShareButton,\n  FacebookIcon,\n  FacebookShareButton,\n  LinkedinIcon,\n  LinkedinShareButton,\n  TwitterIcon,\n  TwitterShareButton,\n} from 'react-share';\n\nimport { getConfig } from '@edx/frontend-platform';\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\nimport { getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\n\nimport messages from './messages';\nimport { useModel } from '../../generic/model-store';\n\nconst SocialIcons = ({\n  analyticsId,\n  className,\n  courseId,\n  emailBody,\n  emailSubject,\n  hashtags,\n  intl,\n  socialMessage,\n}) => {\n  const { marketingUrl } = useModel('coursewareMeta', courseId);\n\n  const {\n    org,\n    title,\n  } = useModel('courseHomeMeta', courseId);\n\n  if (!marketingUrl) {\n    return null;\n  }\n\n  const twitterUrl = getConfig().TWITTER_URL;\n  const twitterAccount = twitterUrl && twitterUrl.substring(twitterUrl.lastIndexOf('/') + 1);\n\n  const logClick = (service) => {\n    if (!analyticsId) {\n      return;\n    }\n\n    const { administrator } = getAuthenticatedUser();\n    sendTrackEvent(analyticsId, {\n      org_key: org,\n      courserun_key: courseId,\n      course_id: courseId, // should only be courserun_key, but left as-is for historical reasons\n      is_staff: administrator,\n      service,\n    });\n  };\n\n  const socialUtmCampaign = getConfig().SOCIAL_UTM_MILESTONE_CAMPAIGN\n    ? `utm_campaign=${getConfig().SOCIAL_UTM_MILESTONE_CAMPAIGN}&` : '';\n  const socialUtmMarketingUrl = `${marketingUrl}?${socialUtmCampaign}utm_medium=social`;\n\n  return (\n    <div className={`social-icons ${className}`}>\n      <LinkedinShareButton\n        beforeOnClick={() => logClick('linkedin')}\n        url={`${socialUtmMarketingUrl}&utm_source=linkedin`}\n      >\n        <LinkedinIcon round size={32} />\n        <span className=\"sr-only\">{intl.formatMessage(messages.shareService, { service: 'LinkedIn' })}</span>\n      </LinkedinShareButton>\n      {twitterAccount && (\n        <TwitterShareButton\n          beforeOnClick={() => logClick('twitter')}\n          className=\"ml-2\"\n          hashtags={hashtags}\n          title={socialMessage ? intl.formatMessage(socialMessage, { platform: `@${twitterAccount}`, title }) : ''}\n          url={`${socialUtmMarketingUrl}&utm_source=twitter`}\n        >\n          <TwitterIcon round size={32} />\n          <span className=\"sr-only\">{intl.formatMessage(messages.shareService, { service: 'Twitter' })}</span>\n        </TwitterShareButton>\n      )}\n      <FacebookShareButton\n        beforeOnClick={() => logClick('facebook')}\n        className=\"ml-2\"\n        quote={socialMessage ? intl.formatMessage(socialMessage, { platform: getConfig().SITE_NAME, title }) : ''}\n        url={`${socialUtmMarketingUrl}&utm_source=facebook`}\n      >\n        <FacebookIcon round size={32} />\n        <span className=\"sr-only\">{intl.formatMessage(messages.shareService, { service: 'Facebook' })}</span>\n      </FacebookShareButton>\n      <EmailShareButton\n        beforeOnClick={() => logClick('email')}\n        body={emailBody ? `${intl.formatMessage(emailBody)}\\n\\n` : ''}\n        className=\"ml-2\"\n        subject={emailSubject ? intl.formatMessage(emailSubject, { platform: getConfig().SITE_NAME, title }) : ''}\n        url={`${marketingUrl}?${socialUtmCampaign}utm_medium=email&utm_source=email`}\n      >\n        <EmailIcon round size={32} />\n        <span className=\"sr-only\">{intl.formatMessage(messages.shareEmail)}</span>\n      </EmailShareButton>\n    </div>\n  );\n};\n\nSocialIcons.defaultProps = {\n  analyticsId: '',\n  className: '',\n  emailBody: messages.defaultEmailBody,\n  emailSubject: null,\n  hashtags: [getConfig().TWITTER_HASHTAG],\n  socialMessage: null,\n};\n\nSocialIcons.propTypes = {\n  analyticsId: PropTypes.string,\n  className: PropTypes.string,\n  courseId: PropTypes.string.isRequired,\n  emailBody: PropTypes.shape({}),\n  emailSubject: PropTypes.shape({}),\n  hashtags: PropTypes.arrayOf(PropTypes.string),\n  intl: intlShape.isRequired,\n  socialMessage: PropTypes.shape({}),\n};\n\nexport default injectIntl(SocialIcons);\n"],"mappings":"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"}