{"version":3,"file":"useExamAccess.js","names":["_react","_interopRequireDefault","require","_logging","_reactUnitTestUtils","_frontendLibSpecialExams","obj","__esModule","default","stateKeys","StrictDict","accessToken","blockAccess","exports","useExamAccess","_ref","id","setAccessToken","useKeyedState","setBlockAccess","isExam","React","useEffect","fetchExamAccess","finally","examAccess","getExamAccess","catch","error","logError","_default"],"sources":["../../../../../../src/courseware/course/sequence/Unit/hooks/useExamAccess.js"],"sourcesContent":["import React from 'react';\n\nimport { logError } from '@edx/frontend-platform/logging';\nimport { StrictDict, useKeyedState } from '@edx/react-unit-test-utils';\nimport { getExamAccess, fetchExamAccess, isExam } from '@edx/frontend-lib-special-exams';\n\nexport const stateKeys = StrictDict({\n  accessToken: 'accessToken',\n  blockAccess: 'blockAccess',\n});\n\nconst useExamAccess = ({\n  id,\n}) => {\n  const [accessToken, setAccessToken] = useKeyedState(stateKeys.accessToken, '');\n  const [blockAccess, setBlockAccess] = useKeyedState(stateKeys.blockAccess, isExam());\n  React.useEffect(() => {\n    if (isExam()) {\n      fetchExamAccess()\n        .finally(() => {\n          const examAccess = getExamAccess();\n          setAccessToken(examAccess);\n          setBlockAccess(false);\n        })\n        .catch((error) => {\n          logError(error);\n        });\n    }\n  }, [id]);\n\n  return {\n    blockAccess,\n    accessToken,\n  };\n};\n\nexport default useExamAccess;\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,mBAAA,GAAAF,OAAA;AACA,IAAAG,wBAAA,GAAAH,OAAA;AAAyF,SAAAD,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAElF,MAAMG,SAAS,GAAG,IAAAC,8BAAU,EAAC;EAClCC,WAAW,EAAE,aAAa;EAC1BC,WAAW,EAAE;AACf,CAAC,CAAC;AAACC,OAAA,CAAAJ,SAAA,GAAAA,SAAA;AAEH,MAAMK,aAAa,GAAGC,IAAA,IAEhB;EAAA,IAFiB;IACrBC;EACF,CAAC,GAAAD,IAAA;EACC,MAAM,CAACJ,WAAW,EAAEM,cAAc,CAAC,GAAG,IAAAC,iCAAa,EAACT,SAAS,CAACE,WAAW,EAAE,EAAE,CAAC;EAC9E,MAAM,CAACC,WAAW,EAAEO,cAAc,CAAC,GAAG,IAAAD,iCAAa,EAACT,SAAS,CAACG,WAAW,EAAE,IAAAQ,+BAAM,EAAC,CAAC,CAAC;EACpFC,cAAK,CAACC,SAAS,CAAC,MAAM;IACpB,IAAI,IAAAF,+BAAM,EAAC,CAAC,EAAE;MACZ,IAAAG,wCAAe,EAAC,CAAC,CACdC,OAAO,CAAC,MAAM;QACb,MAAMC,UAAU,GAAG,IAAAC,sCAAa,EAAC,CAAC;QAClCT,cAAc,CAACQ,UAAU,CAAC;QAC1BN,cAAc,CAAC,KAAK,CAAC;MACvB,CAAC,CAAC,CACDQ,KAAK,CAAEC,KAAK,IAAK;QAChB,IAAAC,iBAAQ,EAACD,KAAK,CAAC;MACjB,CAAC,CAAC;IACN;EACF,CAAC,EAAE,CAACZ,EAAE,CAAC,CAAC;EAER,OAAO;IACLJ,WAAW;IACXD;EACF,CAAC;AACH,CAAC;AAAC,IAAAmB,QAAA,GAEahB,aAAa;AAAAD,OAAA,CAAAL,OAAA,GAAAsB,QAAA"}