{"version":3,"file":"useShouldDisplayHonorCode.test.js","names":["_react","_interopRequireDefault","require","_reactUnitTestUtils","_modelStore","_constants","_useShouldDisplayHonorCode","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","jest","mock","requireActual","useEffect","fn","useModel","state","mockUseKeyedState","stateKeys","props","id","courseId","mockModels","graded","userNeedsIntegritySignature","mockImplementation","modelKeys","units","describe","beforeEach","clearAllMocks","it","useShouldDisplayHonorCode","expectInitializedWith","shouldDisplay","cb","getEffects","setState","React","expect","toHaveBeenCalledWith","testValue","mockVal","toEqual"],"sources":["../../../../../../src/courseware/course/sequence/Unit/hooks/useShouldDisplayHonorCode.test.js"],"sourcesContent":["import React from 'react';\n\nimport { getEffects, mockUseKeyedState } from '@edx/react-unit-test-utils';\nimport { useModel } from '../../../../../generic/model-store';\n\nimport { modelKeys } from '../constants';\n\nimport useShouldDisplayHonorCode, { stateKeys } from './useShouldDisplayHonorCode';\n\njest.mock('react', () => ({\n  ...jest.requireActual('react'),\n  useEffect: jest.fn(),\n}));\njest.mock('../../../../../generic/model-store', () => ({\n  useModel: jest.fn(),\n}));\n\nconst state = mockUseKeyedState(stateKeys);\n\nconst props = {\n  id: 'test-id',\n  courseId: 'test-course-id',\n};\n\nconst mockModels = (graded, userNeedsIntegritySignature) => {\n  useModel.mockImplementation((key) => (\n    (key === modelKeys.units) ? { graded } : { userNeedsIntegritySignature }\n  ));\n};\n\ndescribe('useShouldDisplayHonorCode hook', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockModels(false, false);\n    state.mock();\n  });\n  describe('behavior', () => {\n    it('initializes shouldDisplay to false', () => {\n      useShouldDisplayHonorCode(props);\n      state.expectInitializedWith(stateKeys.shouldDisplay, false);\n    });\n    describe('effect - on userNeedsIntegritySignature', () => {\n      describe('graded and needs integrity signature', () => {\n        it('sets shouldDisplay(true)', () => {\n          mockModels(true, true);\n          useShouldDisplayHonorCode(props);\n          const cb = getEffects([state.setState.shouldDisplay, true], React)[0];\n          cb();\n          expect(state.setState.shouldDisplay).toHaveBeenCalledWith(true);\n        });\n      });\n      describe('not graded', () => {\n        it('sets should not display', () => {\n          mockModels(true, false);\n          useShouldDisplayHonorCode(props);\n          const cb = getEffects([state.setState.shouldDisplay, false], React)[0];\n          cb();\n          expect(state.setState.shouldDisplay).toHaveBeenCalledWith(false);\n        });\n      });\n      describe('does not need integrity signature', () => {\n        it('sets should not display', () => {\n          mockModels(false, true);\n          useShouldDisplayHonorCode(props);\n          const cb = getEffects([state.setState.shouldDisplay, true], React)[0];\n          cb();\n          expect(state.setState.shouldDisplay).toHaveBeenCalledWith(false);\n        });\n      });\n    });\n  });\n  describe('output', () => {\n    it('returns shouldDisplay value from state', () => {\n      const testValue = 'test-value';\n      state.mockVal(stateKeys.shouldDisplay, testValue);\n      expect(useShouldDisplayHonorCode(props)).toEqual(testValue);\n    });\n  });\n});\n"],"mappings":"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"}