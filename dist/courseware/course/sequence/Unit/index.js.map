{"version":3,"file":"index.js","names":["_propTypes","_interopRequireDefault","require","_react","_react2","_i18n","_modelStore","_BookmarkButton","_messages","_ContentIFrame","_UnitSuspense","_constants","_hooks","_urls","_jsxRuntime","obj","__esModule","default","Unit","_ref","courseId","format","onLoaded","id","formatMessage","useIntl","authenticatedUser","React","useContext","AppContext","examAccess","useExamAccess","shouldDisplayHonorCode","useShouldDisplayHonorCode","unit","useModel","modelKeys","units","isProcessing","bookmarkedUpdateState","view","views","student","public","iframeUrl","getIFrameUrl","jsxs","className","children","jsx","title","messages","headerPlaceholder","unitId","isBookmarked","bookmarked","elementId","loadingMessage","loadingSequence","shouldShowContent","blockAccess","propTypes","PropTypes","string","isRequired","func","defaultProps","undefined","_default","exports"],"sources":["../../../../../src/courseware/course/sequence/Unit/index.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { AppContext } from '@edx/frontend-platform/react';\nimport { useIntl } from '@edx/frontend-platform/i18n';\n\nimport { useModel } from '../../../../generic/model-store';\n\nimport BookmarkButton from '../../bookmark/BookmarkButton';\nimport messages from '../messages';\nimport ContentIFrame from './ContentIFrame';\nimport UnitSuspense from './UnitSuspense';\nimport { modelKeys, views } from './constants';\nimport { useExamAccess, useShouldDisplayHonorCode } from './hooks';\nimport { getIFrameUrl } from './urls';\n\nconst Unit = ({\n  courseId,\n  format,\n  onLoaded,\n  id,\n}) => {\n  const { formatMessage } = useIntl();\n  const { authenticatedUser } = React.useContext(AppContext);\n  const examAccess = useExamAccess({ id });\n  const shouldDisplayHonorCode = useShouldDisplayHonorCode({ courseId, id });\n  const unit = useModel(modelKeys.units, id);\n  const isProcessing = unit.bookmarkedUpdateState === 'loading';\n  const view = authenticatedUser ? views.student : views.public;\n\n  const iframeUrl = getIFrameUrl({\n    id,\n    view,\n    format,\n    examAccess,\n  });\n\n  return (\n    <div className=\"unit\">\n      <h1 className=\"mb-0 h3\">{unit.title}</h1>\n      <h2 className=\"sr-only\">{formatMessage(messages.headerPlaceholder)}</h2>\n      <BookmarkButton\n        unitId={unit.id}\n        isBookmarked={unit.bookmarked}\n        isProcessing={isProcessing}\n      />\n      <UnitSuspense {...{ courseId, id }} />\n      <ContentIFrame\n        elementId=\"unit-iframe\"\n        id={id}\n        iframeUrl={iframeUrl}\n        loadingMessage={formatMessage(messages.loadingSequence)}\n        onLoaded={onLoaded}\n        shouldShowContent={!shouldDisplayHonorCode && !examAccess.blockAccess}\n        title={unit.title}\n      />\n    </div>\n  );\n};\n\nUnit.propTypes = {\n  courseId: PropTypes.string.isRequired,\n  format: PropTypes.string,\n  id: PropTypes.string.isRequired,\n  onLoaded: PropTypes.func,\n};\n\nUnit.defaultProps = {\n  format: null,\n  onLoaded: undefined,\n};\n\nexport default Unit;\n"],"mappings":"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"}