{"version":3,"file":"UnitSuspense.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_i18n","_modelStore","_PageLoading","_messages","_honorCode","_lockPaywall","hooks","_constants","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","UnitSuspense","_ref","courseId","id","formatMessage","useIntl","shouldDisplayHonorCode","useShouldDisplayHonorCode","unit","useModel","modelKeys","units","meta","coursewareMeta","shouldDisplayContentGating","contentTypeGatingEnabled","containsContentTypeGatedContent","suspenseComponent","message","Component","jsx","Suspense","fallback","srMessage","children","jsxs","Fragment","messages","loadingLockedContent","LockPaywall","loadingHonorCode","HonorCode","propTypes","PropTypes","string","isRequired","_default","exports"],"sources":["../../../../../src/courseware/course/sequence/Unit/UnitSuspense.jsx"],"sourcesContent":["import React, { Suspense } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { useIntl } from '@edx/frontend-platform/i18n';\n\nimport { useModel } from '../../../../generic/model-store';\nimport PageLoading from '../../../../generic/PageLoading';\n\nimport messages from '../messages';\nimport HonorCode from '../honor-code';\nimport LockPaywall from '../lock-paywall';\nimport * as hooks from './hooks';\nimport { modelKeys } from './constants';\n\nconst UnitSuspense = ({\n  courseId,\n  id,\n}) => {\n  const { formatMessage } = useIntl();\n  const shouldDisplayHonorCode = hooks.useShouldDisplayHonorCode({ courseId, id });\n  const unit = useModel(modelKeys.units, id);\n  const meta = useModel(modelKeys.coursewareMeta, courseId);\n  const shouldDisplayContentGating = (\n    meta.contentTypeGatingEnabled && unit.containsContentTypeGatedContent\n  );\n\n  const suspenseComponent = (message, Component) => (\n    <Suspense fallback={<PageLoading srMessage={formatMessage(message)} />}>\n      <Component courseId={courseId} />\n    </Suspense>\n  );\n\n  return (\n    <>\n      {shouldDisplayContentGating && (\n        suspenseComponent(messages.loadingLockedContent, LockPaywall)\n      )}\n      {shouldDisplayHonorCode && (\n        suspenseComponent(messages.loadingHonorCode, HonorCode)\n      )}\n    </>\n  );\n};\n\nUnitSuspense.propTypes = {\n  courseId: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n};\n\nexport default UnitSuspense;\n"],"mappings":"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"}