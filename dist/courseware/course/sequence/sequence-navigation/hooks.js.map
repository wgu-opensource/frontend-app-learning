{"version":3,"file":"hooks.js","names":["_reactRedux","require","_modelStore","_data","useSequenceNavigationMetadata","currentSequenceId","currentUnitId","sequenceIds","useSelector","sequenceIdsSelector","sequence","useModel","courseId","state","courseware","courseStatus","sequenceStatus","isFirstUnit","isLastUnit","sequenceIndex","indexOf","unitIndex","unitIds","isFirstSequence","isFirstUnitInSequence","isLastSequence","length","isLastUnitInSequence","nextSequenceId","previousSequenceId","nextLink","nextIndex","nextUnitId","previousLink","previousIndex","previousUnitId"],"sources":["../../../../../src/courseware/course/sequence/sequence-navigation/hooks.js"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\n\nimport { useSelector } from 'react-redux';\nimport { useModel } from '../../../../generic/model-store';\nimport { sequenceIdsSelector } from '../../../data';\n\nexport function useSequenceNavigationMetadata(currentSequenceId, currentUnitId) {\n  const sequenceIds = useSelector(sequenceIdsSelector);\n  const sequence = useModel('sequences', currentSequenceId);\n  const courseId = useSelector(state => state.courseware.courseId);\n  const courseStatus = useSelector(state => state.courseware.courseStatus);\n  const sequenceStatus = useSelector(state => state.courseware.sequenceStatus);\n\n  // If we don't know the sequence and unit yet, then assume no.\n  if (courseStatus !== 'loaded' || sequenceStatus !== 'loaded' || !currentSequenceId || !currentUnitId) {\n    return { isFirstUnit: false, isLastUnit: false };\n  }\n\n  const sequenceIndex = sequenceIds.indexOf(currentSequenceId);\n  const unitIndex = sequence.unitIds.indexOf(currentUnitId);\n\n  const isFirstSequence = sequenceIndex === 0;\n  const isFirstUnitInSequence = unitIndex === 0;\n  const isFirstUnit = isFirstSequence && isFirstUnitInSequence;\n  const isLastSequence = sequenceIndex === sequenceIds.length - 1;\n  const isLastUnitInSequence = unitIndex === sequence.unitIds.length - 1;\n  const isLastUnit = isLastSequence && isLastUnitInSequence;\n\n  const nextSequenceId = sequenceIndex < sequenceIds.length - 1 ? sequenceIds[sequenceIndex + 1] : null;\n  const previousSequenceId = sequenceIndex > 0 ? sequenceIds[sequenceIndex - 1] : null;\n\n  let nextLink;\n  if (isLastUnit) {\n    nextLink = `/course/${courseId}/course-end`;\n  } else {\n    const nextIndex = unitIndex + 1;\n    if (nextIndex < sequence.unitIds.length) {\n      const nextUnitId = sequence.unitIds[nextIndex];\n      nextLink = `/course/${courseId}/${currentSequenceId}/${nextUnitId}`;\n    } else if (nextSequenceId) {\n      nextLink = `/course/${courseId}/${nextSequenceId}/first`;\n    }\n  }\n\n  let previousLink;\n  const previousIndex = unitIndex - 1;\n  if (previousIndex >= 0) {\n    const previousUnitId = sequence.unitIds[previousIndex];\n    previousLink = `/course/${courseId}/${currentSequenceId}/${previousUnitId}`;\n  } else if (previousSequenceId) {\n    previousLink = `/course/${courseId}/${previousSequenceId}/last`;\n  }\n\n  return {\n    isFirstUnit, isLastUnit, nextLink, previousLink,\n  };\n}\n"],"mappings":"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"}