{"version":3,"file":"HonorCode.js","names":["_react","_interopRequireDefault","require","_propTypes","_reactRedux","_frontendPlatform","_auth","_i18n","_paragon","_reactRouterDom","_modelStore","_data","_messages","_jsxRuntime","obj","__esModule","default","HonorCode","_ref","intl","courseId","navigate","useNavigate","dispatch","useDispatch","isMasquerading","username","useModel","authUser","getAuthenticatedUser","siteName","getConfig","SITE_NAME","honorCodeUrl","TERMS_OF_SERVICE_URL","handleCancel","handleAgree","saveIntegritySignature","jsxs","Alert","variant","children","formatMessage","messages","jsx","FormattedMessage","id","defaultMessage","values","link","href","description","ActionRow","Spacer","Button","onClick","propTypes","intlShape","isRequired","PropTypes","string","_default","injectIntl","exports"],"sources":["../../../../../src/courseware/course/sequence/honor-code/HonorCode.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux';\nimport { getConfig } from '@edx/frontend-platform';\nimport { getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport { FormattedMessage, injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { ActionRow, Alert, Button } from '@edx/paragon';\n\nimport { useNavigate } from 'react-router-dom';\nimport { useModel } from '../../../../generic/model-store';\nimport { saveIntegritySignature } from '../../../data';\nimport messages from './messages';\n\nconst HonorCode = ({ intl, courseId }) => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    isMasquerading,\n    username,\n  } = useModel('courseHomeMeta', courseId);\n  const authUser = getAuthenticatedUser();\n  const siteName = getConfig().SITE_NAME;\n  const honorCodeUrl = `${getConfig().TERMS_OF_SERVICE_URL}#honor-code`;\n\n  const handleCancel = () => navigate(`/course/${courseId}/home`);\n\n  const handleAgree = () => dispatch(\n    // If the request is made by a staff user masquerading as a specific learner,\n    // don't actually create a signature for them on the backend.\n    // Only the modal dialog will be dismissed.\n    // Otherwise, even for staff users, we want to record the signature.\n    saveIntegritySignature(\n      courseId,\n      isMasquerading && username !== authUser.username,\n    ),\n  );\n\n  return (\n    <Alert variant=\"light\" aria-live=\"off\">\n      <h4 aria-level=\"3\">\n        {siteName}{' '}\n        {intl.formatMessage(messages['learn.honorCode.name'])}\n      </h4>\n\n      <p>\n        <FormattedMessage\n          id=\"learn.honorCode.content\"\n          defaultMessage=\"Honesty and academic integrity are important to {siteName} and the institutions providing courses and programs on the {siteName} site. By clicking “I agree” below, I confirm that I have read, understand, and will abide by the {link} for the {siteName} Site.\"\n          values={{\n            siteName,\n            link: <a href={honorCodeUrl}>{intl.formatMessage(messages['learn.honorCode.name'])}</a>,\n          }}\n          description=\"This is shown to learner, when course author wants to learners to explicity agree on their (Term of use or conduct), hence it links honor code page. \"\n        />\n      </p>\n\n      <ActionRow>\n        <ActionRow.Spacer />\n        <Button variant=\"tertiary\" onClick={handleCancel}>\n          {intl.formatMessage(messages['learn.honorCode.cancel'])}\n        </Button>\n        <Button variant=\"primary\" onClick={handleAgree}>\n          {intl.formatMessage(messages['learn.honorCode.agree'])}\n        </Button>\n      </ActionRow>\n    </Alert>\n  );\n};\n\nHonorCode.propTypes = {\n  intl: intlShape.isRequired,\n  courseId: PropTypes.string.isRequired,\n};\n\nexport default injectIntl(HonorCode);\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,WAAA,GAAAF,OAAA;AACA,IAAAG,iBAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;AACA,IAAAM,QAAA,GAAAN,OAAA;AAEA,IAAAO,eAAA,GAAAP,OAAA;AACA,IAAAQ,WAAA,GAAAR,OAAA;AACA,IAAAS,KAAA,GAAAT,OAAA;AACA,IAAAU,SAAA,GAAAX,sBAAA,CAAAC,OAAA;AAAkC,IAAAW,WAAA,GAAAX,OAAA;AAAA,SAAAD,uBAAAa,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAElC,MAAMG,SAAS,GAAGC,IAAA,IAAwB;EAAA,IAAvB;IAAEC,IAAI;IAAEC;EAAS,CAAC,GAAAF,IAAA;EACnC,MAAMG,QAAQ,GAAG,IAAAC,2BAAW,EAAC,CAAC;EAC9B,MAAMC,QAAQ,GAAG,IAAAC,uBAAW,EAAC,CAAC;EAC9B,MAAM;IACJC,cAAc;IACdC;EACF,CAAC,GAAG,IAAAC,oBAAQ,EAAC,gBAAgB,EAAEP,QAAQ,CAAC;EACxC,MAAMQ,QAAQ,GAAG,IAAAC,0BAAoB,EAAC,CAAC;EACvC,MAAMC,QAAQ,GAAG,IAAAC,2BAAS,EAAC,CAAC,CAACC,SAAS;EACtC,MAAMC,YAAY,GAAI,GAAE,IAAAF,2BAAS,EAAC,CAAC,CAACG,oBAAqB,aAAY;EAErE,MAAMC,YAAY,GAAGA,CAAA,KAAMd,QAAQ,CAAE,WAAUD,QAAS,OAAM,CAAC;EAE/D,MAAMgB,WAAW,GAAGA,CAAA,KAAMb,QAAQ;EAChC;EACA;EACA;EACA;EACA,IAAAc,4BAAsB,EACpBjB,QAAQ,EACRK,cAAc,IAAIC,QAAQ,KAAKE,QAAQ,CAACF,QAC1C,CACF,CAAC;EAED,oBACE,IAAAb,WAAA,CAAAyB,IAAA,EAAC9B,QAAA,CAAA+B,KAAK;IAACC,OAAO,EAAC,OAAO;IAAC,aAAU,KAAK;IAAAC,QAAA,gBACpC,IAAA5B,WAAA,CAAAyB,IAAA;MAAI,cAAW,GAAG;MAAAG,QAAA,GACfX,QAAQ,EAAE,GAAG,EACbX,IAAI,CAACuB,aAAa,CAACC,iBAAQ,CAAC,sBAAsB,CAAC,CAAC;IAAA,CACnD,CAAC,eAEL,IAAA9B,WAAA,CAAA+B,GAAA;MAAAH,QAAA,eACE,IAAA5B,WAAA,CAAA+B,GAAA,EAACrC,KAAA,CAAAsC,gBAAgB;QACfC,EAAE,EAAC,yBAAyB;QAC5BC,cAAc,EAAC,6QAAmQ;QAClRC,MAAM,EAAE;UACNlB,QAAQ;UACRmB,IAAI,eAAE,IAAApC,WAAA,CAAA+B,GAAA;YAAGM,IAAI,EAAEjB,YAAa;YAAAQ,QAAA,EAAEtB,IAAI,CAACuB,aAAa,CAACC,iBAAQ,CAAC,sBAAsB,CAAC;UAAC,CAAI;QACxF,CAAE;QACFQ,WAAW,EAAC;MAAuJ,CACpK;IAAC,CACD,CAAC,eAEJ,IAAAtC,WAAA,CAAAyB,IAAA,EAAC9B,QAAA,CAAA4C,SAAS;MAAAX,QAAA,gBACR,IAAA5B,WAAA,CAAA+B,GAAA,EAACpC,QAAA,CAAA4C,SAAS,CAACC,MAAM,IAAE,CAAC,eACpB,IAAAxC,WAAA,CAAA+B,GAAA,EAACpC,QAAA,CAAA8C,MAAM;QAACd,OAAO,EAAC,UAAU;QAACe,OAAO,EAAEpB,YAAa;QAAAM,QAAA,EAC9CtB,IAAI,CAACuB,aAAa,CAACC,iBAAQ,CAAC,wBAAwB,CAAC;MAAC,CACjD,CAAC,eACT,IAAA9B,WAAA,CAAA+B,GAAA,EAACpC,QAAA,CAAA8C,MAAM;QAACd,OAAO,EAAC,SAAS;QAACe,OAAO,EAAEnB,WAAY;QAAAK,QAAA,EAC5CtB,IAAI,CAACuB,aAAa,CAACC,iBAAQ,CAAC,uBAAuB,CAAC;MAAC,CAChD,CAAC;IAAA,CACA,CAAC;EAAA,CACP,CAAC;AAEZ,CAAC;AAED1B,SAAS,CAACuC,SAAS,GAAG;EACpBrC,IAAI,EAAEsC,eAAS,CAACC,UAAU;EAC1BtC,QAAQ,EAAEuC,kBAAS,CAACC,MAAM,CAACF;AAC7B,CAAC;AAAC,IAAAG,QAAA,GAEa,IAAAC,gBAAU,EAAC7C,SAAS,CAAC;AAAA8C,OAAA,CAAA/C,OAAA,GAAA6C,QAAA"}