{"version":3,"file":"NotesVisibility.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_frontendPlatform","_auth","_i18n","_reactFontawesome","_faPencilAlt","_messages","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","value","_toPropertyKey","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","toggleNotes","iframe","document","getElementById","contentWindow","postMessage","getConfig","LMS_BASE_URL","NotesVisibility","Component","constructor","props","data","visibility","state","visible","getAuthenticatedHttpClient","put","visibilityUrl","then","setState","course","notes","id","render","message","jsxs","className","role","type","onClick","handleClick","onKeyDown","tabIndex","children","jsx","FontAwesomeIcon","icon","faPencilAlt","intl","formatMessage","messages","propTypes","intlShape","isRequired","PropTypes","shape","string","bool","_default","injectIntl","exports"],"sources":["../../../../../src/courseware/course/content-tools/notes-visibility/NotesVisibility.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { getConfig } from '@edx/frontend-platform';\nimport { getAuthenticatedHttpClient } from '@edx/frontend-platform/auth';\nimport {\n  injectIntl, intlShape,\n} from '@edx/frontend-platform/i18n';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPencilAlt } from '@fortawesome/free-solid-svg-icons';\nimport messages from './messages';\n\nfunction toggleNotes() {\n  const iframe = document.getElementById('unit-iframe');\n  iframe.contentWindow.postMessage('tools.toggleNotes', getConfig().LMS_BASE_URL);\n}\n\nclass NotesVisibility extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: props.course.notes.visible,\n    };\n    this.visibilityUrl = `${getConfig().LMS_BASE_URL}/courses/${props.course.id}/edxnotes/visibility/`;\n  }\n\n  handleClick = () => {\n    const data = { visibility: this.state.visible };\n    getAuthenticatedHttpClient().put(\n      this.visibilityUrl,\n      data,\n    ).then(() => {\n      this.setState((state) => ({ visible: !state.visible }));\n      toggleNotes();\n    });\n  };\n\n  render() {\n    const message = this.state.visible ? 'notes.button.hide' : 'notes.button.show';\n    return (\n      <button\n        className={`trigger btn ${this.state.visible ? 'text-secondary' : 'text-success'}  mx-2 `}\n        role=\"switch\"\n        type=\"button\"\n        onClick={this.handleClick}\n        onKeyDown={this.handleClick}\n        tabIndex=\"-1\"\n        aria-checked={this.state.visible ? 'true' : 'false'}\n      >\n        <FontAwesomeIcon icon={faPencilAlt} aria-hidden=\"true\" className=\"mr-2\" />\n        {this.props.intl.formatMessage(messages[message])}\n      </button>\n    );\n  }\n}\n\nNotesVisibility.propTypes = {\n  intl: intlShape.isRequired,\n  course: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    notes: PropTypes.shape({\n      visible: PropTypes.bool,\n    }).isRequired,\n  }).isRequired,\n};\n\nexport default injectIntl(NotesVisibility);\n"],"mappings":"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"}