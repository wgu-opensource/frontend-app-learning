{"version":3,"file":"Chat.js","names":["_reactDom","require","_propTypes","_interopRequireDefault","_frontendLibLearningAssistant","_i18n","_analytics","_jsxRuntime","obj","__esModule","default","Chat","_ref","enabled","enrollmentMode","isStaff","courseId","contentToolsEnabled","VERIFIED_MODES","AUDIT_MODES","isEnrolled","undefined","some","mode","shouldDisplayChat","sendTrackEvent","course_id","jsx","Fragment","children","createPortal","Xpert","document","body","propTypes","PropTypes","bool","isRequired","string","defaultProps","_default","injectIntl","exports"],"sources":["../../../../src/courseware/course/chat/Chat.jsx"],"sourcesContent":["import { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport { Xpert } from '@edx/frontend-lib-learning-assistant';\nimport { injectIntl } from '@edx/frontend-platform/i18n';\n\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\n\nconst Chat = ({\n  enabled,\n  enrollmentMode,\n  isStaff,\n  courseId,\n  contentToolsEnabled,\n}) => {\n  const VERIFIED_MODES = [\n    'professional',\n    'verified',\n    'no-id-professional',\n    'credit',\n    'masters',\n    'executive-education',\n    'paid-executive-education',\n    'paid-bootcamp',\n  ];\n\n  const AUDIT_MODES = [\n    'audit',\n    'honor',\n    'unpaid-executive-education',\n    'unpaid-bootcamp',\n  ];\n\n  const isEnrolled = (\n    enrollmentMode !== null\n    && enrollmentMode !== undefined\n    && [...VERIFIED_MODES, ...AUDIT_MODES].some(mode => mode === enrollmentMode)\n  );\n\n  const shouldDisplayChat = (\n    enabled\n    && (isEnrolled || isStaff) // display only to enrolled or staff\n  );\n\n  // TODO: Remove this Segment alert. This has been added purely to diagnose whether\n  //       usage issues are as a result of the Xpert toggle button not appearing.\n  if (shouldDisplayChat) {\n    sendTrackEvent('edx.ui.lms.learning_assistant.render', {\n      course_id: courseId,\n    });\n  }\n\n  return (\n    <>\n      {/* Use a portal to ensure that component overlay does not compete with learning MFE styles. */}\n      {shouldDisplayChat && (createPortal(\n        <Xpert courseId={courseId} contentToolsEnabled={contentToolsEnabled} />,\n        document.body,\n      ))}\n    </>\n  );\n};\n\nChat.propTypes = {\n  isStaff: PropTypes.bool.isRequired,\n  enabled: PropTypes.bool.isRequired,\n  enrollmentMode: PropTypes.string,\n  courseId: PropTypes.string.isRequired,\n  contentToolsEnabled: PropTypes.bool.isRequired,\n};\n\nChat.defaultProps = {\n  enrollmentMode: null,\n};\n\nexport default injectIntl(Chat);\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEA,IAAAG,6BAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AAEA,IAAAK,UAAA,GAAAL,OAAA;AAAkE,IAAAM,WAAA,GAAAN,OAAA;AAAA,SAAAE,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAElE,MAAMG,IAAI,GAAGC,IAAA,IAMP;EAAA,IANQ;IACZC,OAAO;IACPC,cAAc;IACdC,OAAO;IACPC,QAAQ;IACRC;EACF,CAAC,GAAAL,IAAA;EACC,MAAMM,cAAc,GAAG,CACrB,cAAc,EACd,UAAU,EACV,oBAAoB,EACpB,QAAQ,EACR,SAAS,EACT,qBAAqB,EACrB,0BAA0B,EAC1B,eAAe,CAChB;EAED,MAAMC,WAAW,GAAG,CAClB,OAAO,EACP,OAAO,EACP,4BAA4B,EAC5B,iBAAiB,CAClB;EAED,MAAMC,UAAU,GACdN,cAAc,KAAK,IAAI,IACpBA,cAAc,KAAKO,SAAS,IAC5B,CAAC,GAAGH,cAAc,EAAE,GAAGC,WAAW,CAAC,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,KAAKT,cAAc,CAC5E;EAED,MAAMU,iBAAiB,GACrBX,OAAO,KACHO,UAAU,IAAIL,OAAO,CAAC,CAAC;EAC5B;;EAED;EACA;EACA,IAAIS,iBAAiB,EAAE;IACrB,IAAAC,yBAAc,EAAC,sCAAsC,EAAE;MACrDC,SAAS,EAAEV;IACb,CAAC,CAAC;EACJ;EAEA,oBACE,IAAAT,WAAA,CAAAoB,GAAA,EAAApB,WAAA,CAAAqB,QAAA;IAAAC,QAAA,EAEGL,iBAAiB,iBAAK,IAAAM,sBAAY,gBACjC,IAAAvB,WAAA,CAAAoB,GAAA,EAACvB,6BAAA,CAAA2B,KAAK;MAACf,QAAQ,EAAEA,QAAS;MAACC,mBAAmB,EAAEA;IAAoB,CAAE,CAAC,EACvEe,QAAQ,CAACC,IACX;EAAE,CACF,CAAC;AAEP,CAAC;AAEDtB,IAAI,CAACuB,SAAS,GAAG;EACfnB,OAAO,EAAEoB,kBAAS,CAACC,IAAI,CAACC,UAAU;EAClCxB,OAAO,EAAEsB,kBAAS,CAACC,IAAI,CAACC,UAAU;EAClCvB,cAAc,EAAEqB,kBAAS,CAACG,MAAM;EAChCtB,QAAQ,EAAEmB,kBAAS,CAACG,MAAM,CAACD,UAAU;EACrCpB,mBAAmB,EAAEkB,kBAAS,CAACC,IAAI,CAACC;AACtC,CAAC;AAED1B,IAAI,CAAC4B,YAAY,GAAG;EAClBzB,cAAc,EAAE;AAClB,CAAC;AAAC,IAAA0B,QAAA,GAEa,IAAAC,gBAAU,EAAC9B,IAAI,CAAC;AAAA+B,OAAA,CAAAhC,OAAA,GAAA8B,QAAA"}