{"version":3,"file":"CourseBreadcrumbs.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_frontendPlatform","_i18n","_reactFontawesome","_faHome","_reactRedux","_paragon","_reactRouterDom","_modelStore","_JumpNavMenuItem","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","CourseBreadcrumb","_ref","content","withSeparator","courseId","sequenceId","unitId","isStaff","defaultContent","filter","destination","id","label","sequences","jsxs","Fragment","children","jsx","className","role","style","overflow","textOverflow","whiteSpace","getConfig","ENABLE_JUMPNAV","length","Link","to","SelectMenu","isLink","defaultMessage","map","item","isDefault","title","currentSequence","currentUnit","propTypes","PropTypes","arrayOf","shape","bool","string","isRequired","defaultProps","CourseBreadcrumbs","_ref2","sectionId","course","useModel","courseStatus","useSelector","state","courseware","sequenceStatus","allSequencesInSections","fromEntries","useModels","sectionIds","section","sequenceIds","links","useMemo","chapters","sequentials","entries","forEach","_ref3","push","sequence","FontAwesomeIcon","icon","faHome","FormattedMessage","description","_default","exports"],"sources":["../../../src/courseware/course/CourseBreadcrumbs.jsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { getConfig } from '@edx/frontend-platform';\nimport { FormattedMessage } from '@edx/frontend-platform/i18n';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHome } from '@fortawesome/free-solid-svg-icons';\nimport { useSelector } from 'react-redux';\nimport { SelectMenu } from '@edx/paragon';\nimport { Link } from 'react-router-dom';\nimport { useModel, useModels } from '../../generic/model-store';\nimport JumpNavMenuItem from './JumpNavMenuItem';\n\nconst CourseBreadcrumb = ({\n  content, withSeparator, courseId, sequenceId, unitId, isStaff,\n}) => {\n  const defaultContent = content.filter(destination => destination.default)[0] || { id: courseId, label: '', sequences: [] };\n  return (\n    <>\n      {withSeparator && (\n        <li className=\"col-auto p-0 mx-2 text-primary-500 text-truncate text-nowrap\" role=\"presentation\" aria-hidden>/</li>\n      )}\n\n      <li style={{\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n      }}\n      >\n        { getConfig().ENABLE_JUMPNAV !== 'true' || content.length < 2 || !isStaff\n          ? (\n            <Link\n              className=\"text-primary-500\"\n              to={defaultContent.sequences.length\n                ? `/course/${courseId}/${defaultContent.sequences[0].id}`\n                : `/course/${courseId}/${defaultContent.id}`}\n            >\n              {defaultContent.label}\n            </Link>\n          )\n          : (\n            <SelectMenu isLink defaultMessage={defaultContent.label}>\n              {content.map(item => (\n                <JumpNavMenuItem\n                  isDefault={item.default}\n                  sequences={item.sequences}\n                  courseId={courseId}\n                  title={item.label}\n                  currentSequence={sequenceId}\n                  currentUnit={unitId}\n                />\n              ))}\n            </SelectMenu>\n          )}\n\n      </li>\n    </>\n  );\n};\nCourseBreadcrumb.propTypes = {\n  content: PropTypes.arrayOf(\n    PropTypes.shape({\n      default: PropTypes.bool,\n      id: PropTypes.string,\n      label: PropTypes.string,\n    }),\n  ).isRequired,\n  sequenceId: PropTypes.string,\n  unitId: PropTypes.string,\n  withSeparator: PropTypes.bool,\n  courseId: PropTypes.string,\n  isStaff: PropTypes.bool,\n};\n\nCourseBreadcrumb.defaultProps = {\n  withSeparator: false,\n  sequenceId: null,\n  unitId: null,\n  courseId: null,\n  isStaff: null,\n};\n\nconst CourseBreadcrumbs = ({\n  courseId,\n  sectionId,\n  sequenceId,\n  unitId,\n  isStaff,\n}) => {\n  const course = useModel('coursewareMeta', courseId);\n  const courseStatus = useSelector(state => state.courseware.courseStatus);\n  const sequenceStatus = useSelector(state => state.courseware.sequenceStatus);\n\n  const allSequencesInSections = Object.fromEntries(useModels('sections', course.sectionIds).map(section => [section.id, {\n    default: section.id === sectionId,\n    title: section.title,\n    sequences: useModels('sequences', section.sequenceIds),\n  }]));\n\n  const links = useMemo(() => {\n    const chapters = [];\n    const sequentials = [];\n    if (courseStatus === 'loaded' && sequenceStatus === 'loaded') {\n      Object.entries(allSequencesInSections).forEach(([id, section]) => {\n        chapters.push({\n          id,\n          label: section.title,\n          default: section.default,\n          sequences: section.sequences,\n        });\n        if (section.default) {\n          section.sequences.forEach(sequence => {\n            sequentials.push({\n              id: sequence.id,\n              label: sequence.title,\n              default: sequence.id === sequenceId,\n              sequences: [sequence],\n            });\n          });\n        }\n      });\n    }\n    return [chapters, sequentials];\n  }, [courseStatus, sequenceStatus, allSequencesInSections]);\n\n  return (\n    <nav aria-label=\"breadcrumb\" className=\"my-4 d-inline-block col-sm-10\">\n      <ol className=\"list-unstyled d-flex  flex-nowrap align-items-center m-0\">\n        <li className=\"list-unstyled col-auto m-0 p-0\">\n          <Link\n            className=\"flex-shrink-0 text-primary\"\n            to={`/course/${courseId}/home`}\n          >\n            <FontAwesomeIcon icon={faHome} className=\"mr-2\" />\n            <FormattedMessage\n              id=\"learn.breadcrumb.navigation.course.home\"\n              description=\"The course home link in breadcrumbs nav\"\n              defaultMessage=\"Course\"\n            />\n          </Link>\n        </li>\n        {links.map(content => (\n          <CourseBreadcrumb\n            courseId={courseId}\n            sequenceId={sequenceId}\n            content={content}\n            unitId={unitId}\n            withSeparator\n            isStaff={isStaff}\n          />\n        ))}\n      </ol>\n    </nav>\n  );\n};\n\nCourseBreadcrumbs.propTypes = {\n  courseId: PropTypes.string.isRequired,\n  sectionId: PropTypes.string,\n  sequenceId: PropTypes.string,\n  unitId: PropTypes.string,\n  isStaff: PropTypes.bool,\n};\n\nCourseBreadcrumbs.defaultProps = {\n  sectionId: null,\n  sequenceId: null,\n  unitId: null,\n  isStaff: null,\n};\n\nexport default CourseBreadcrumbs;\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,iBAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AACA,IAAAK,iBAAA,GAAAL,OAAA;AAAiE,IAAAM,OAAA,GAAAN,OAAA;AAEjE,IAAAO,WAAA,GAAAP,OAAA;AACA,IAAAQ,QAAA,GAAAR,OAAA;AACA,IAAAS,eAAA,GAAAT,OAAA;AACA,IAAAU,WAAA,GAAAV,OAAA;AACA,IAAAW,gBAAA,GAAAT,sBAAA,CAAAF,OAAA;AAAgD,IAAAY,WAAA,GAAAZ,OAAA;AAAA,SAAAE,uBAAAW,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAlB,wBAAAc,GAAA,EAAAI,WAAA,SAAAA,WAAA,IAAAJ,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAQ,KAAA,GAAAL,wBAAA,CAAAC,WAAA,OAAAI,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAT,GAAA,YAAAQ,KAAA,CAAAE,GAAA,CAAAV,GAAA,SAAAW,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAhB,GAAA,QAAAgB,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAnB,GAAA,EAAAgB,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAf,GAAA,EAAAgB,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAhB,GAAA,CAAAgB,GAAA,SAAAL,MAAA,CAAAT,OAAA,GAAAF,GAAA,MAAAQ,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAArB,GAAA,EAAAW,MAAA,YAAAA,MAAA;AAEhD,MAAMW,gBAAgB,GAAGC,IAAA,IAEnB;EAAA,IAFoB;IACxBC,OAAO;IAAEC,aAAa;IAAEC,QAAQ;IAAEC,UAAU;IAAEC,MAAM;IAAEC;EACxD,CAAC,GAAAN,IAAA;EACC,MAAMO,cAAc,GAAGN,OAAO,CAACO,MAAM,CAACC,WAAW,IAAIA,WAAW,CAAC9B,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI;IAAE+B,EAAE,EAAEP,QAAQ;IAAEQ,KAAK,EAAE,EAAE;IAAEC,SAAS,EAAE;EAAG,CAAC;EAC1H,oBACE,IAAApC,WAAA,CAAAqC,IAAA,EAAArC,WAAA,CAAAsC,QAAA;IAAAC,QAAA,GACGb,aAAa,iBACZ,IAAA1B,WAAA,CAAAwC,GAAA;MAAIC,SAAS,EAAC,8DAA8D;MAACC,IAAI,EAAC,cAAc;MAAC,mBAAW;MAAAH,QAAA,EAAC;IAAC,CAAI,CACnH,eAED,IAAAvC,WAAA,CAAAwC,GAAA;MAAIG,KAAK,EAAE;QACTC,QAAQ,EAAE,QAAQ;QAClBC,YAAY,EAAE,UAAU;QACxBC,UAAU,EAAE;MACd,CAAE;MAAAP,QAAA,EAEE,IAAAQ,2BAAS,EAAC,CAAC,CAACC,cAAc,KAAK,MAAM,IAAIvB,OAAO,CAACwB,MAAM,GAAG,CAAC,IAAI,CAACnB,OAAO,gBAErE,IAAA9B,WAAA,CAAAwC,GAAA,EAAC3C,eAAA,CAAAqD,IAAI;QACHT,SAAS,EAAC,kBAAkB;QAC5BU,EAAE,EAAEpB,cAAc,CAACK,SAAS,CAACa,MAAM,GAC9B,WAAUtB,QAAS,IAAGI,cAAc,CAACK,SAAS,CAAC,CAAC,CAAC,CAACF,EAAG,EAAC,GACtD,WAAUP,QAAS,IAAGI,cAAc,CAACG,EAAG,EAAE;QAAAK,QAAA,EAE9CR,cAAc,CAACI;MAAK,CACjB,CAAC,gBAGP,IAAAnC,WAAA,CAAAwC,GAAA,EAAC5C,QAAA,CAAAwD,UAAU;QAACC,MAAM;QAACC,cAAc,EAAEvB,cAAc,CAACI,KAAM;QAAAI,QAAA,EACrDd,OAAO,CAAC8B,GAAG,CAACC,IAAI,iBACf,IAAAxD,WAAA,CAAAwC,GAAA,EAACzC,gBAAA,CAAAI,OAAe;UACdsD,SAAS,EAAED,IAAI,CAACrD,OAAQ;UACxBiC,SAAS,EAAEoB,IAAI,CAACpB,SAAU;UAC1BT,QAAQ,EAAEA,QAAS;UACnB+B,KAAK,EAAEF,IAAI,CAACrB,KAAM;UAClBwB,eAAe,EAAE/B,UAAW;UAC5BgC,WAAW,EAAE/B;QAAO,CACrB,CACF;MAAC,CACQ;IACb,CAED,CAAC;EAAA,CACL,CAAC;AAEP,CAAC;AACDN,gBAAgB,CAACsC,SAAS,GAAG;EAC3BpC,OAAO,EAAEqC,kBAAS,CAACC,OAAO,CACxBD,kBAAS,CAACE,KAAK,CAAC;IACd7D,OAAO,EAAE2D,kBAAS,CAACG,IAAI;IACvB/B,EAAE,EAAE4B,kBAAS,CAACI,MAAM;IACpB/B,KAAK,EAAE2B,kBAAS,CAACI;EACnB,CAAC,CACH,CAAC,CAACC,UAAU;EACZvC,UAAU,EAAEkC,kBAAS,CAACI,MAAM;EAC5BrC,MAAM,EAAEiC,kBAAS,CAACI,MAAM;EACxBxC,aAAa,EAAEoC,kBAAS,CAACG,IAAI;EAC7BtC,QAAQ,EAAEmC,kBAAS,CAACI,MAAM;EAC1BpC,OAAO,EAAEgC,kBAAS,CAACG;AACrB,CAAC;AAED1C,gBAAgB,CAAC6C,YAAY,GAAG;EAC9B1C,aAAa,EAAE,KAAK;EACpBE,UAAU,EAAE,IAAI;EAChBC,MAAM,EAAE,IAAI;EACZF,QAAQ,EAAE,IAAI;EACdG,OAAO,EAAE;AACX,CAAC;AAED,MAAMuC,iBAAiB,GAAGC,KAAA,IAMpB;EAAA,IANqB;IACzB3C,QAAQ;IACR4C,SAAS;IACT3C,UAAU;IACVC,MAAM;IACNC;EACF,CAAC,GAAAwC,KAAA;EACC,MAAME,MAAM,GAAG,IAAAC,oBAAQ,EAAC,gBAAgB,EAAE9C,QAAQ,CAAC;EACnD,MAAM+C,YAAY,GAAG,IAAAC,uBAAW,EAACC,KAAK,IAAIA,KAAK,CAACC,UAAU,CAACH,YAAY,CAAC;EACxE,MAAMI,cAAc,GAAG,IAAAH,uBAAW,EAACC,KAAK,IAAIA,KAAK,CAACC,UAAU,CAACC,cAAc,CAAC;EAE5E,MAAMC,sBAAsB,GAAGjE,MAAM,CAACkE,WAAW,CAAC,IAAAC,qBAAS,EAAC,UAAU,EAAET,MAAM,CAACU,UAAU,CAAC,CAAC3B,GAAG,CAAC4B,OAAO,IAAI,CAACA,OAAO,CAACjD,EAAE,EAAE;IACrH/B,OAAO,EAAEgF,OAAO,CAACjD,EAAE,KAAKqC,SAAS;IACjCb,KAAK,EAAEyB,OAAO,CAACzB,KAAK;IACpBtB,SAAS,EAAE,IAAA6C,qBAAS,EAAC,WAAW,EAAEE,OAAO,CAACC,WAAW;EACvD,CAAC,CAAC,CAAC,CAAC;EAEJ,MAAMC,KAAK,GAAG,IAAAC,cAAO,EAAC,MAAM;IAC1B,MAAMC,QAAQ,GAAG,EAAE;IACnB,MAAMC,WAAW,GAAG,EAAE;IACtB,IAAId,YAAY,KAAK,QAAQ,IAAII,cAAc,KAAK,QAAQ,EAAE;MAC5DhE,MAAM,CAAC2E,OAAO,CAACV,sBAAsB,CAAC,CAACW,OAAO,CAACC,KAAA,IAAmB;QAAA,IAAlB,CAACzD,EAAE,EAAEiD,OAAO,CAAC,GAAAQ,KAAA;QAC3DJ,QAAQ,CAACK,IAAI,CAAC;UACZ1D,EAAE;UACFC,KAAK,EAAEgD,OAAO,CAACzB,KAAK;UACpBvD,OAAO,EAAEgF,OAAO,CAAChF,OAAO;UACxBiC,SAAS,EAAE+C,OAAO,CAAC/C;QACrB,CAAC,CAAC;QACF,IAAI+C,OAAO,CAAChF,OAAO,EAAE;UACnBgF,OAAO,CAAC/C,SAAS,CAACsD,OAAO,CAACG,QAAQ,IAAI;YACpCL,WAAW,CAACI,IAAI,CAAC;cACf1D,EAAE,EAAE2D,QAAQ,CAAC3D,EAAE;cACfC,KAAK,EAAE0D,QAAQ,CAACnC,KAAK;cACrBvD,OAAO,EAAE0F,QAAQ,CAAC3D,EAAE,KAAKN,UAAU;cACnCQ,SAAS,EAAE,CAACyD,QAAQ;YACtB,CAAC,CAAC;UACJ,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ;IACA,OAAO,CAACN,QAAQ,EAAEC,WAAW,CAAC;EAChC,CAAC,EAAE,CAACd,YAAY,EAAEI,cAAc,EAAEC,sBAAsB,CAAC,CAAC;EAE1D,oBACE,IAAA/E,WAAA,CAAAwC,GAAA;IAAK,cAAW,YAAY;IAACC,SAAS,EAAC,+BAA+B;IAAAF,QAAA,eACpE,IAAAvC,WAAA,CAAAqC,IAAA;MAAII,SAAS,EAAC,0DAA0D;MAAAF,QAAA,gBACtE,IAAAvC,WAAA,CAAAwC,GAAA;QAAIC,SAAS,EAAC,gCAAgC;QAAAF,QAAA,eAC5C,IAAAvC,WAAA,CAAAqC,IAAA,EAACxC,eAAA,CAAAqD,IAAI;UACHT,SAAS,EAAC,4BAA4B;UACtCU,EAAE,EAAG,WAAUxB,QAAS,OAAO;UAAAY,QAAA,gBAE/B,IAAAvC,WAAA,CAAAwC,GAAA,EAAC/C,iBAAA,CAAAqG,eAAe;YAACC,IAAI,EAAEC,cAAO;YAACvD,SAAS,EAAC;UAAM,CAAE,CAAC,eAClD,IAAAzC,WAAA,CAAAwC,GAAA,EAAChD,KAAA,CAAAyG,gBAAgB;YACf/D,EAAE,EAAC,yCAAyC;YAC5CgE,WAAW,EAAC,yCAAyC;YACrD5C,cAAc,EAAC;UAAQ,CACxB,CAAC;QAAA,CACE;MAAC,CACL,CAAC,EACJ+B,KAAK,CAAC9B,GAAG,CAAC9B,OAAO,iBAChB,IAAAzB,WAAA,CAAAwC,GAAA,EAACjB,gBAAgB;QACfI,QAAQ,EAAEA,QAAS;QACnBC,UAAU,EAAEA,UAAW;QACvBH,OAAO,EAAEA,OAAQ;QACjBI,MAAM,EAAEA,MAAO;QACfH,aAAa;QACbI,OAAO,EAAEA;MAAQ,CAClB,CACF,CAAC;IAAA,CACA;EAAC,CACF,CAAC;AAEV,CAAC;AAEDuC,iBAAiB,CAACR,SAAS,GAAG;EAC5BlC,QAAQ,EAAEmC,kBAAS,CAACI,MAAM,CAACC,UAAU;EACrCI,SAAS,EAAET,kBAAS,CAACI,MAAM;EAC3BtC,UAAU,EAAEkC,kBAAS,CAACI,MAAM;EAC5BrC,MAAM,EAAEiC,kBAAS,CAACI,MAAM;EACxBpC,OAAO,EAAEgC,kBAAS,CAACG;AACrB,CAAC;AAEDI,iBAAiB,CAACD,YAAY,GAAG;EAC/BG,SAAS,EAAE,IAAI;EACf3C,UAAU,EAAE,IAAI;EAChBC,MAAM,EAAE,IAAI;EACZC,OAAO,EAAE;AACX,CAAC;AAAC,IAAAqE,QAAA,GAEa9B,iBAAiB;AAAA+B,OAAA,CAAAjG,OAAA,GAAAgG,QAAA"}