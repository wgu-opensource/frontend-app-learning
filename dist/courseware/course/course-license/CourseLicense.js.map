{"version":3,"file":"CourseLicense.js","names":["_react","_interopRequireDefault","require","_i18n","_propTypes","_reactFontawesome","_faCopyright","_faCreativeCommons","_faCreativeCommonsBy","_faCreativeCommonsNc","_faCreativeCommonsNd","_faCreativeCommonsSa","_faCreativeCommonsZero","_messages","_jsxRuntime","obj","__esModule","default","CreativeCommonsLicenseTags","by","intlMessagesId","icon","faCreativeCommonsBy","nc","faCreativeCommonsNc","nd","faCreativeCommonsNd","sa","faCreativeCommonsSa","zero","faCreativeCommonsZero","parseLicense","license","colonIndex","indexOf","licenseType","slice","trim","optionStr","options","version","defaultVersion","split","forEach","option","key","value","toLowerCase","Object","keys","length","CourseLicense","_ref","intl","renderAllRightsReservedLicense","jsxs","className","children","jsx","FontAwesomeIcon","faCopyright","formatMessage","messages","renderCreativeCommonsLicense","activeCreativeCommonsLicenseTags","rel","target","href","join","faCreativeCommons","map","tag","licenseOptions","licenseVersion","propTypes","PropTypes","string","intlShape","isRequired","defaultProps","_default","injectIntl","exports"],"sources":["../../../../src/courseware/course/course-license/CourseLicense.jsx"],"sourcesContent":["import React from 'react';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCopyright } from '@fortawesome/free-regular-svg-icons';\nimport {\n  faCreativeCommons,\n  faCreativeCommonsBy,\n  faCreativeCommonsNc,\n  faCreativeCommonsNd,\n  faCreativeCommonsSa,\n  faCreativeCommonsZero,\n} from '@fortawesome/free-brands-svg-icons';\n\nimport messages from './messages';\n\nconst CreativeCommonsLicenseTags = {\n  by: {\n    intlMessagesId: 'learn.course.license.creativeCommons.terms.by',\n    icon: faCreativeCommonsBy,\n  },\n  nc: {\n    intlMessagesId: 'learn.course.license.creativeCommons.terms.nc',\n    icon: faCreativeCommonsNc,\n  },\n  nd: {\n    intlMessagesId: 'learn.course.license.creativeCommons.terms.nd',\n    icon: faCreativeCommonsNd,\n  },\n  sa: {\n    intlMessagesId: 'learn.course.license.creativeCommons.terms.sa',\n    icon: faCreativeCommonsSa,\n  },\n  zero: {\n    intlMessagesId: 'learn.course.license.creativeCommons.terms.zero',\n    icon: faCreativeCommonsZero,\n  },\n};\n\nfunction parseLicense(license) {\n  if (!license) {\n    // Default to All Rights Reserved if no license\n    // is detected\n    return ['all-rights-reserved', {}];\n  }\n\n  // Search for a colon character denoting the end\n  // of the license type and start of the options\n  const colonIndex = license.indexOf(':');\n  if (colonIndex === -1) {\n    // no options, so the entire thing is the license type\n    return [license, {}];\n  }\n\n  // Split the license on the colon\n  const licenseType = license.slice(0, colonIndex).trim();\n  const optionStr = license.slice(colonIndex + 1).trim();\n\n  let options = {};\n  let version = '';\n\n  // Set the defaultVersion to 4.0\n  const defaultVersion = '4.0';\n  optionStr.split(' ').forEach(option => {\n    // Split the option into key and value\n    // Default the value to `true` if no value\n    let key = '';\n    let value = '';\n    if (option.indexOf('=') !== -1) {\n      [key, value] = option.split('=');\n    } else {\n      key = option;\n      value = true;\n    }\n\n    // Check for version\n    if (key === 'ver') {\n      version = value;\n    } else {\n      // Set the option key to lowercase to make\n      // it easier to query\n      options[key.toLowerCase()] = value;\n    }\n  });\n\n  // No options\n  if (Object.keys(options).length === 0) {\n    // If no other options are set for the\n    // license, set version to 1.0\n    version = '1.0';\n\n    // Set the `zero` option so the link\n    // works correctly\n    options = {\n      zero: true,\n    };\n  }\n\n  // Set the version to whatever was included,\n  // using `defaultVersion` as a fallback if unset\n  version = version || defaultVersion;\n\n  return [licenseType, options, version];\n}\n\nconst CourseLicense = ({\n  license,\n  intl,\n}) => {\n  const renderAllRightsReservedLicense = () => (\n    <div className=\"text-gray-500\">\n      <FontAwesomeIcon aria-hidden=\"true\" className=\"mr-1\" icon={faCopyright} />\n      {intl.formatMessage(messages['learn.course.license.allRightsReserved.text'])}\n    </div>\n  );\n\n  const renderCreativeCommonsLicense = (activeCreativeCommonsLicenseTags, version) => (\n    <a\n      className=\"text-decoration-none text-gray-500\"\n      rel=\"license noopener noreferrer\"\n      target=\"_blank\"\n      href={`https://creativecommons.org/licenses/${activeCreativeCommonsLicenseTags.join('-')}/${version}/`}\n    >\n      <span className=\"sr-only\">\n        {intl.formatMessage(messages['learn.course.license.creativeCommons.terms.preamble'])}&nbsp;\n      </span>\n      <FontAwesomeIcon aria-hidden=\"true\" className=\"mr-1\" icon={faCreativeCommons} />\n      {activeCreativeCommonsLicenseTags.map(tag => (\n        <span key={tag}>\n          <span className=\"sr-only\">\n            {intl.formatMessage(messages[CreativeCommonsLicenseTags[tag].intlMessagesId])}&nbsp;\n          </span>\n          <FontAwesomeIcon aria-hidden=\"true\" className=\"mr-1\" icon={CreativeCommonsLicenseTags[tag].icon} />\n        </span>\n      ))}\n      {intl.formatMessage(messages['learn.course.license.creativeCommons.text'])}\n    </a>\n  );\n\n  const [licenseType, licenseOptions, licenseVersion] = parseLicense(license);\n\n  return (\n    <div className=\"text-right small py-1\">\n      {licenseType === 'all-rights-reserved' && renderAllRightsReservedLicense()}\n      {licenseType === 'creative-commons' && renderCreativeCommonsLicense(\n        Object.keys(licenseOptions),\n        licenseVersion,\n      )}\n    </div>\n  );\n};\n\nCourseLicense.propTypes = {\n  license: PropTypes.string,\n  intl: intlShape.isRequired,\n};\n\nCourseLicense.defaultProps = {\n  license: 'all-rights-reserved',\n};\n\nexport default injectIntl(CourseLicense);\n"],"mappings":"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"}