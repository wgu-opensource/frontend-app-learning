{"version":3,"file":"NotificationTray.js","names":["_i18n","require","_classnames","_interopRequireDefault","_react","_interopRequireWildcard","_modelStore","_UpgradeNotification","_messages","_SidebarBase","_SidebarContext","_NotificationTrigger","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","NotificationTray","_ref","intl","courseId","onNotificationSeen","shouldDisplayFullScreen","upgradeNotificationCurrentState","setUpgradeNotificationCurrentState","useContext","SidebarContext","course","useModel","accessExpiration","contentTypeGatingEnabled","marketingUrl","offer","timeOffsetMillis","userTimezone","org","verifiedMode","useEffect","setTimeout","jsx","title","formatMessage","messages","notificationTitle","ariaLabel","notificationTray","sidebarId","ID","className","classNames","children","upsellPageName","shouldDisplayBorder","setupgradeNotificationCurrentState","noNotificationsMessage","propTypes","intlShape","isRequired","Trigger","NotificationTrigger","_default","injectIntl","exports"],"sources":["../../../../../../src/courseware/course/sidebar/sidebars/notifications/NotificationTray.jsx"],"sourcesContent":["import { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport classNames from 'classnames';\nimport React, { useContext, useEffect } from 'react';\nimport { useModel } from '../../../../../generic/model-store';\nimport UpgradeNotification from '../../../../../generic/upgrade-notification/UpgradeNotification';\n\nimport messages from '../../../messages';\nimport SidebarBase from '../../common/SidebarBase';\nimport SidebarContext from '../../SidebarContext';\nimport NotificationTrigger, { ID } from './NotificationTrigger';\n\nconst NotificationTray = ({ intl }) => {\n  const {\n    courseId,\n    onNotificationSeen,\n    shouldDisplayFullScreen,\n    upgradeNotificationCurrentState,\n    setUpgradeNotificationCurrentState,\n  } = useContext(SidebarContext);\n  const course = useModel('coursewareMeta', courseId);\n\n  const {\n    accessExpiration,\n    contentTypeGatingEnabled,\n    marketingUrl,\n    offer,\n    timeOffsetMillis,\n    userTimezone,\n  } = course;\n\n  const {\n    org,\n    verifiedMode,\n  } = useModel('courseHomeMeta', courseId);\n\n  // After three seconds, update notificationSeen (to hide red dot)\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => { setTimeout(onNotificationSeen, 3000); }, []);\n\n  return (\n    <SidebarBase\n      title={intl.formatMessage(messages.notificationTitle)}\n      ariaLabel={intl.formatMessage(messages.notificationTray)}\n      sidebarId={ID}\n      className={classNames({ 'h-100': !verifiedMode && !shouldDisplayFullScreen })}\n    >\n      <div>{verifiedMode\n        ? (\n          <UpgradeNotification\n            offer={offer}\n            verifiedMode={verifiedMode}\n            accessExpiration={accessExpiration}\n            contentTypeGatingEnabled={contentTypeGatingEnabled}\n            marketingUrl={marketingUrl}\n            upsellPageName=\"in_course\"\n            userTimezone={userTimezone}\n            shouldDisplayBorder={false}\n            timeOffsetMillis={timeOffsetMillis}\n            courseId={courseId}\n            org={org}\n            upgradeNotificationCurrentState={upgradeNotificationCurrentState}\n            setupgradeNotificationCurrentState={setUpgradeNotificationCurrentState}\n          />\n        ) : (\n          <p className=\"p-3 small\">{intl.formatMessage(messages.noNotificationsMessage)}</p>\n        )}\n      </div>\n    </SidebarBase>\n  );\n};\n\nNotificationTray.propTypes = {\n  intl: intlShape.isRequired,\n};\n\nNotificationTray.Trigger = NotificationTrigger;\nNotificationTray.ID = ID;\n\nexport default injectIntl(NotificationTray);\n"],"mappings":"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"}