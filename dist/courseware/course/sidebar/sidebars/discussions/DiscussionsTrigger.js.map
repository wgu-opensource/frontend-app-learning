{"version":3,"file":"DiscussionsTrigger.js","names":["_frontendPlatform","require","_i18n","_paragon","_icons","_propTypes","_interopRequireDefault","_react","_interopRequireWildcard","_reactRedux","_modelStore","_thunks","_TriggerBase","_SidebarContext","_messages","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ensureConfig","ID","exports","DiscussionsTrigger","_ref","intl","onClick","unitId","courseId","useContext","SidebarContext","dispatch","useDispatch","tabs","useModel","topic","baseUrl","getConfig","DISCUSSIONS_MFE_BASE_URL","edxProvider","useMemo","find","tab","slug","useEffect","getCourseDiscussionTopics","id","enabledInContext","jsx","ariaLabel","formatMessage","messages","openDiscussionsTrigger","children","Icon","src","QuestionAnswer","className","propTypes","intlShape","isRequired","PropTypes","func","_default","injectIntl"],"sources":["../../../../../../src/courseware/course/sidebar/sidebars/discussions/DiscussionsTrigger.jsx"],"sourcesContent":["import { ensureConfig, getConfig } from '@edx/frontend-platform';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { Icon } from '@edx/paragon';\nimport { QuestionAnswer } from '@edx/paragon/icons';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useEffect, useMemo } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useModel } from '../../../../../generic/model-store';\nimport { getCourseDiscussionTopics } from '../../../../data/thunks';\nimport SidebarTriggerBase from '../../common/TriggerBase';\nimport SidebarContext from '../../SidebarContext';\nimport messages from './messages';\n\nensureConfig(['DISCUSSIONS_MFE_BASE_URL']);\nexport const ID = 'DISCUSSIONS';\n\nconst DiscussionsTrigger = ({\n  intl,\n  onClick,\n}) => {\n  const {\n    unitId,\n    courseId,\n  } = useContext(SidebarContext);\n  const dispatch = useDispatch();\n  const { tabs } = useModel('courseHomeMeta', courseId);\n  const topic = useModel('discussionTopics', unitId);\n  const baseUrl = getConfig().DISCUSSIONS_MFE_BASE_URL;\n  const edxProvider = useMemo(\n    () => tabs?.find(tab => tab.slug === 'discussion'),\n    [tabs],\n  );\n\n  useEffect(() => {\n    if (baseUrl && edxProvider) {\n      dispatch(getCourseDiscussionTopics(courseId));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [courseId, baseUrl]);\n\n  if (!topic?.id || !topic?.enabledInContext) {\n    return null;\n  }\n\n  return (\n    <SidebarTriggerBase onClick={onClick} ariaLabel={intl.formatMessage(messages.openDiscussionsTrigger)}>\n      <Icon src={QuestionAnswer} className=\"m-0 m-auto\" />\n    </SidebarTriggerBase>\n  );\n};\n\nDiscussionsTrigger.propTypes = {\n  intl: intlShape.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default injectIntl(DiscussionsTrigger);\n"],"mappings":"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"}