{"version":3,"sources":["../../../../../src/courseware/course/bookmark/data/thunks.js"],"names":["addBookmark","unitId","dispatch","modelType","model","id","bookmarked","bookmarkedUpdateState","error","removeBookmark"],"mappings":";;;;;;;;AAAA;;AACA;;AAIA;;AAEO,SAASA,WAAT,CAAqBC,MAArB,EAA6B;AAClC,SAAO,MAAOC,QAAP,IAAoB;AACzB;AACAA,IAAAA,QAAQ,CAAC,6BAAY;AACnBC,MAAAA,SAAS,EAAE,OADQ;AAEnBC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAEJ,MADC;AAELK,QAAAA,UAAU,EAAE,IAFP;AAGLC,QAAAA,qBAAqB,EAAE;AAHlB;AAFY,KAAZ,CAAD,CAAR;;AASA,QAAI;AACF,YAAM,yBAAeN,MAAf,CAAN;AACAC,MAAAA,QAAQ,CAAC,6BAAY;AACnBC,QAAAA,SAAS,EAAE,OADQ;AAEnBC,QAAAA,KAAK,EAAE;AACLC,UAAAA,EAAE,EAAEJ,MADC;AAELK,UAAAA,UAAU,EAAE,IAFP;AAGLC,UAAAA,qBAAqB,EAAE;AAHlB;AAFY,OAAZ,CAAD,CAAR;AAQD,KAVD,CAUE,OAAOC,KAAP,EAAc;AACd,6BAASA,KAAT;AACAN,MAAAA,QAAQ,CAAC,6BAAY;AACnBC,QAAAA,SAAS,EAAE,OADQ;AAEnBC,QAAAA,KAAK,EAAE;AACLC,UAAAA,EAAE,EAAEJ,MADC;AAELK,UAAAA,UAAU,EAAE,KAFP;AAGLC,UAAAA,qBAAqB,EAAE;AAHlB;AAFY,OAAZ,CAAD,CAAR;AAQD;AACF,GAhCD;AAiCD;;AAEM,SAASE,cAAT,CAAwBR,MAAxB,EAAgC;AACrC,SAAO,MAAOC,QAAP,IAAoB;AACzB;AACAA,IAAAA,QAAQ,CAAC,6BAAY;AACnBC,MAAAA,SAAS,EAAE,OADQ;AAEnBC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAEJ,MADC;AAELK,QAAAA,UAAU,EAAE,KAFP;AAGLC,QAAAA,qBAAqB,EAAE;AAHlB;AAFY,KAAZ,CAAD,CAAR;;AAQA,QAAI;AACF,YAAM,yBAAeN,MAAf,CAAN;AACAC,MAAAA,QAAQ,CAAC,6BAAY;AACnBC,QAAAA,SAAS,EAAE,OADQ;AAEnBC,QAAAA,KAAK,EAAE;AACLC,UAAAA,EAAE,EAAEJ,MADC;AAELK,UAAAA,UAAU,EAAE,KAFP;AAGLC,UAAAA,qBAAqB,EAAE;AAHlB;AAFY,OAAZ,CAAD,CAAR;AAQD,KAVD,CAUE,OAAOC,KAAP,EAAc;AACd,6BAASA,KAAT;AACAN,MAAAA,QAAQ,CAAC,6BAAY;AACnBC,QAAAA,SAAS,EAAE,OADQ;AAEnBC,QAAAA,KAAK,EAAE;AACLC,UAAAA,EAAE,EAAEJ,MADC;AAELK,UAAAA,UAAU,EAAE,IAFP;AAGLC,UAAAA,qBAAqB,EAAE;AAHlB;AAFY,OAAZ,CAAD,CAAR;AAQD;AACF,GA/BD;AAgCD","sourcesContent":["import { logError } from '@edx/frontend-platform/logging';\nimport {\n  createBookmark,\n  deleteBookmark,\n} from './api';\nimport { updateModel } from '../../../../generic/model-store';\n\nexport function addBookmark(unitId) {\n  return async (dispatch) => {\n    // Optimistically update the bookmarked flag.\n    dispatch(updateModel({\n      modelType: 'units',\n      model: {\n        id: unitId,\n        bookmarked: true,\n        bookmarkedUpdateState: 'loading',\n      },\n    }));\n\n    try {\n      await createBookmark(unitId);\n      dispatch(updateModel({\n        modelType: 'units',\n        model: {\n          id: unitId,\n          bookmarked: true,\n          bookmarkedUpdateState: 'loaded',\n        },\n      }));\n    } catch (error) {\n      logError(error);\n      dispatch(updateModel({\n        modelType: 'units',\n        model: {\n          id: unitId,\n          bookmarked: false,\n          bookmarkedUpdateState: 'failed',\n        },\n      }));\n    }\n  };\n}\n\nexport function removeBookmark(unitId) {\n  return async (dispatch) => {\n    // Optimistically update the bookmarked flag.\n    dispatch(updateModel({\n      modelType: 'units',\n      model: {\n        id: unitId,\n        bookmarked: false,\n        bookmarkedUpdateState: 'loading',\n      },\n    }));\n    try {\n      await deleteBookmark(unitId);\n      dispatch(updateModel({\n        modelType: 'units',\n        model: {\n          id: unitId,\n          bookmarked: false,\n          bookmarkedUpdateState: 'loaded',\n        },\n      }));\n    } catch (error) {\n      logError(error);\n      dispatch(updateModel({\n        modelType: 'units',\n        model: {\n          id: unitId,\n          bookmarked: true,\n          bookmarkedUpdateState: 'failed',\n        },\n      }));\n    }\n  };\n}\n"],"file":"thunks.js"}