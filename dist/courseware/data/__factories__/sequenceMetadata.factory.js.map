{"version":3,"file":"sequenceMetadata.factory.js","names":["_rosie","require","_courseBlocks","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","Factory","define","option","courseId","Error","build","type","unitBlocks","children","map","unitBlock","id","attr","sequenceBlock","block_id","display_name","gated","prereq_url","prereq_id","prereq_section_name","gated_section_name","href","graded","bookmarked","path","complete","content","page_title","contains_content_type_gated_content","attrs","exclude_units","position","next_url","tag","save_position","prev_url","is_time_limited","is_hidden_after_due","show_completion","banner_text","format","buildSimpleCourseAndSequenceMetadata","options","courseMetadata","course_access","has_access","simpleCourseBlocks","buildSimpleCourseBlocks","name","sequenceBlocks","sequenceMetadata","block","courseHomeMetadata"],"sources":["../../../../src/courseware/data/__factories__/sequenceMetadata.factory.js"],"sourcesContent":["import { Factory } from 'rosie'; // eslint-disable-line import/no-extraneous-dependencies\nimport '../../../shared/data/__factories__/block.factory';\nimport { buildSimpleCourseBlocks } from '../../../shared/data/__factories__/courseBlocks.factory';\n\nFactory.define('sequenceMetadata')\n  .option('courseId', (courseId) => {\n    if (courseId) {\n      return courseId;\n    }\n    throw new Error('courseId must be specified for sequenceMetadata factory.');\n  })\n  // An array of units\n  .option('unitBlocks', ['courseId'], courseId => ([\n    Factory.build(\n      'block',\n      { type: 'vertical' },\n      { courseId },\n    ),\n  ]))\n  .option('sequenceBlock', ['courseId', 'unitBlocks'], (courseId, unitBlocks) => (\n    Factory.build(\n      'block',\n      { type: 'sequential', children: unitBlocks.map(unitBlock => unitBlock.id) },\n      { courseId },\n    )\n  ))\n  .attr('element_id', ['sequenceBlock'], sequenceBlock => sequenceBlock.block_id)\n  .attr('item_id', ['sequenceBlock'], sequenceBlock => sequenceBlock.id)\n  .attr('display_name', ['sequenceBlock'], sequenceBlock => sequenceBlock.display_name)\n  .attr('gated_content', ['sequenceBlock'], sequenceBlock => ({\n    gated: false,\n    prereq_url: null,\n    prereq_id: `${sequenceBlock.id}-prereq`,\n    prereq_section_name: `${sequenceBlock.display_name}-prereq`,\n    gated_section_name: sequenceBlock.display_name,\n  }))\n  .attr('items', ['unitBlocks', 'sequenceBlock'], (unitBlocks, sequenceBlock) => unitBlocks.map(\n    unitBlock => ({\n      href: '',\n      graded: unitBlock.graded,\n      id: unitBlock.id,\n      bookmarked: unitBlock.bookmarked || false,\n      path: `Chapter Display Name > ${sequenceBlock.display_name} > ${unitBlock.display_name}`,\n      type: unitBlock.type,\n      complete: unitBlock.complete || null,\n      content: '',\n      page_title: unitBlock.display_name,\n      contains_content_type_gated_content: unitBlock.contains_content_type_gated_content,\n    }),\n  ))\n  .attrs({\n    exclude_units: true,\n    position: null,\n    next_url: null,\n    tag: 'sequential',\n    save_position: true,\n    prev_url: null,\n    is_time_limited: false,\n    is_hidden_after_due: false,\n    show_completion: true,\n    banner_text: null,\n    format: 'Homework',\n  });\n\n/**\n * Build a simple course and simple metadata for its sequence.\n */\nexport default function buildSimpleCourseAndSequenceMetadata(options = {}) {\n  const courseMetadata = options.courseMetadata || Factory.build('courseMetadata', {\n    course_access: {\n      has_access: false,\n    },\n  });\n  const courseId = courseMetadata.id;\n  const simpleCourseBlocks = buildSimpleCourseBlocks(courseId, courseMetadata.name, options);\n  const { unitBlocks, sequenceBlocks } = simpleCourseBlocks;\n  const sequenceMetadata = options.sequenceMetadata || sequenceBlocks.map(block => Factory.build(\n    'sequenceMetadata',\n    {},\n    {\n      courseId, unitBlocks, sequenceBlock: block,\n    },\n  ));\n  const courseHomeMetadata = options.courseHomeMetadata || Factory.build('courseHomeMetadata');\n  return {\n    ...simpleCourseBlocks,\n    courseMetadata,\n    sequenceMetadata,\n    courseHomeMetadata,\n  };\n}\n"],"mappings":"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"}