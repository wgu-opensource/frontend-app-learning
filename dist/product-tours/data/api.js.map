{"version":3,"file":"api.js","names":["_frontendPlatform","require","_auth","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","getTourData","username","url","getConfig","LMS_BASE_URL","data","getAuthenticatedHttpClient","get","toursEnabled","camelCaseObject","error","httpErrorStatus","customAttributes","patchTourData","tourData","patch"],"sources":["../../../src/product-tours/data/api.js"],"sourcesContent":["import { camelCaseObject, getConfig } from '@edx/frontend-platform';\nimport { getAuthenticatedHttpClient } from '@edx/frontend-platform/auth';\n\nexport async function getTourData(username) {\n  const url = `${getConfig().LMS_BASE_URL}/api/user_tours/v1/${username}`;\n  try {\n    const { data } = await getAuthenticatedHttpClient().get(url);\n    return { toursEnabled: true, ...camelCaseObject(data) };\n  } catch (error) {\n    const { httpErrorStatus } = error && error.customAttributes;\n    /** The API will return a\n     *    401 if the user is not authenticated\n     *    403 if the tour waffle flag is inactive\n     *    404 if no User Tour objects exist for the given username\n     */\n    if (httpErrorStatus === 401 || httpErrorStatus === 403 || httpErrorStatus === 404) {\n      return { toursEnabled: false };\n    }\n    throw error;\n  }\n}\n\nexport async function patchTourData(username, tourData) {\n  const url = `${getConfig().LMS_BASE_URL}/api/user_tours/v1/${username}`;\n  return getAuthenticatedHttpClient().patch(url, tourData);\n}\n"],"mappings":"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"}